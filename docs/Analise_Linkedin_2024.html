<!DOCTYPE html>
<html>
<head>
<title>Analise_Linkedin_2024.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> seaborn <span class="hljs-keyword">as</span> sns
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> matplotlib <span class="hljs-keyword">as</span> mpl
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">from</span> matplotlib.patches <span class="hljs-keyword">import</span> PathPatch
<span class="hljs-keyword">from</span> matplotlib.path <span class="hljs-keyword">import</span> Path
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Configurações globais para o matplotlib</span>
mpl.rcParams[<span class="hljs-string">'font.family'</span>] = <span class="hljs-string">'Arial'</span>  <span class="hljs-comment"># Define a fonte como Arial</span>
mpl.rcParams[<span class="hljs-string">'axes.titlesize'</span>] = <span class="hljs-number">18</span>    <span class="hljs-comment"># Tamanho do título do gráfico</span>
mpl.rcParams[<span class="hljs-string">'axes.labelsize'</span>] = <span class="hljs-number">12</span>    <span class="hljs-comment"># Tamanho dos rótulos dos eixos</span>
mpl.rcParams[<span class="hljs-string">'xtick.labelsize'</span>] = <span class="hljs-number">10</span>   <span class="hljs-comment"># Tamanho dos rótulos do eixo x</span>
mpl.rcParams[<span class="hljs-string">'ytick.labelsize'</span>] = <span class="hljs-number">10</span>   <span class="hljs-comment"># Tamanho dos rótulos do eixo y</span>

<span class="hljs-comment"># Configurações globais para as legendas</span>
mpl.rcParams[<span class="hljs-string">'legend.fontsize'</span>] = <span class="hljs-number">14</span>  <span class="hljs-comment"># Tamanho da fonte da legenda</span>
mpl.rcParams[<span class="hljs-string">'legend.loc'</span>] = <span class="hljs-string">'upper left'</span>  <span class="hljs-comment"># Posição da legenda</span>
mpl.rcParams[<span class="hljs-string">'legend.frameon'</span>] = <span class="hljs-literal">True</span>  <span class="hljs-comment"># Exibir borda ao redor da legenda</span>
mpl.rcParams[<span class="hljs-string">'legend.title_fontsize'</span>] = <span class="hljs-number">16</span>  <span class="hljs-comment"># Tamanho da fonte do título da legenda</span>
mpl.rcParams[<span class="hljs-string">'legend.labelspacing'</span>] = <span class="hljs-number">1.2</span>  <span class="hljs-comment"># Espaçamento entre os itens da legenda</span>
mpl.rcParams[<span class="hljs-string">'legend.borderpad'</span>] = <span class="hljs-number">1.5</span>  <span class="hljs-comment"># Espaçamento ao redor da legenda</span>
mpl.rcParams[<span class="hljs-string">'legend.borderaxespad'</span>] = <span class="hljs-number">1.0</span>  <span class="hljs-comment"># Distância da legenda para o gráfico</span>

<span class="hljs-comment"># Configuração do estilo com seaborn e paleta de cores</span>
sns.set(style=<span class="hljs-string">"whitegrid"</span>)  <span class="hljs-comment"># Define o estilo do gráfico como whitegrid</span>
sns.set_palette(<span class="hljs-string">"plasma"</span>)   <span class="hljs-comment"># Define a paleta de cores padrão como "plasma"</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Carregar dataset</span>
df = pd.read_csv(<span class="hljs-string">'linkedin_postings_2023_2024.csv'</span>)
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Verificar tamanho do dataset|</span>
df.shape
</div></code></pre>
<pre><code>(123849, 31)
</code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Ver as primeiras linhas do dataset</span>
df.head()
</div></code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>job_id</th>
      <th>company_name</th>
      <th>title</th>
      <th>description</th>
      <th>max_salary</th>
      <th>pay_period</th>
      <th>location</th>
      <th>company_id</th>
      <th>views</th>
      <th>med_salary</th>
      <th>...</th>
      <th>skills_desc</th>
      <th>listed_time</th>
      <th>posting_domain</th>
      <th>sponsored</th>
      <th>work_type</th>
      <th>currency</th>
      <th>compensation_type</th>
      <th>normalized_salary</th>
      <th>zip_code</th>
      <th>fips</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>921716</td>
      <td>Corcoran Sawyer Smith</td>
      <td>Marketing Coordinator</td>
      <td>Job descriptionA leading real estate firm in N...</td>
      <td>20.0</td>
      <td>HOURLY</td>
      <td>Princeton, NJ</td>
      <td>2774458.0</td>
      <td>20.0</td>
      <td>NaN</td>
      <td>...</td>
      <td>Requirements: \n\nWe are seeking a College or ...</td>
      <td>1.713398e+12</td>
      <td>NaN</td>
      <td>0</td>
      <td>FULL_TIME</td>
      <td>USD</td>
      <td>BASE_SALARY</td>
      <td>38480.0</td>
      <td>8540.0</td>
      <td>34021.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1829192</td>
      <td>NaN</td>
      <td>Mental Health Therapist/Counselor</td>
      <td>At Aspen Therapy and Wellness , we are committ...</td>
      <td>50.0</td>
      <td>HOURLY</td>
      <td>Fort Collins, CO</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>1.712858e+12</td>
      <td>NaN</td>
      <td>0</td>
      <td>FULL_TIME</td>
      <td>USD</td>
      <td>BASE_SALARY</td>
      <td>83200.0</td>
      <td>80521.0</td>
      <td>8069.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>10998357</td>
      <td>The National Exemplar</td>
      <td>Assitant Restaurant Manager</td>
      <td>The National Exemplar is accepting application...</td>
      <td>65000.0</td>
      <td>YEARLY</td>
      <td>Cincinnati, OH</td>
      <td>64896719.0</td>
      <td>8.0</td>
      <td>NaN</td>
      <td>...</td>
      <td>We are currently accepting resumes for FOH - A...</td>
      <td>1.713278e+12</td>
      <td>NaN</td>
      <td>0</td>
      <td>FULL_TIME</td>
      <td>USD</td>
      <td>BASE_SALARY</td>
      <td>55000.0</td>
      <td>45202.0</td>
      <td>39061.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>23221523</td>
      <td>Abrams Fensterman, LLP</td>
      <td>Senior Elder Law / Trusts and Estates Associat...</td>
      <td>Senior Associate Attorney - Elder Law / Trusts...</td>
      <td>175000.0</td>
      <td>YEARLY</td>
      <td>New Hyde Park, NY</td>
      <td>766262.0</td>
      <td>16.0</td>
      <td>NaN</td>
      <td>...</td>
      <td>This position requires a baseline understandin...</td>
      <td>1.712896e+12</td>
      <td>NaN</td>
      <td>0</td>
      <td>FULL_TIME</td>
      <td>USD</td>
      <td>BASE_SALARY</td>
      <td>157500.0</td>
      <td>11040.0</td>
      <td>36059.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>35982263</td>
      <td>NaN</td>
      <td>Service Technician</td>
      <td>Looking for HVAC service tech with experience ...</td>
      <td>80000.0</td>
      <td>YEARLY</td>
      <td>Burlington, IA</td>
      <td>NaN</td>
      <td>3.0</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>1.713452e+12</td>
      <td>NaN</td>
      <td>0</td>
      <td>FULL_TIME</td>
      <td>USD</td>
      <td>BASE_SALARY</td>
      <td>70000.0</td>
      <td>52601.0</td>
      <td>19057.0</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 31 columns</p>
</div>
<pre class="hljs"><code><div><span class="hljs-comment"># Ver as colunas e tipos dados</span>
df.info()
</div></code></pre>
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 123849 entries, 0 to 123848
Data columns (total 31 columns):
 #   Column                      Non-Null Count   Dtype  
---  ------                      --------------   -----  
 0   job_id                      123849 non-null  int64  
 1   company_name                122130 non-null  object 
 2   title                       123849 non-null  object 
 3   description                 123842 non-null  object 
 4   max_salary                  29793 non-null   float64
 5   pay_period                  36073 non-null   object 
 6   location                    123849 non-null  object 
 7   company_id                  122132 non-null  float64
 8   views                       122160 non-null  float64
 9   med_salary                  6280 non-null    float64
 10  min_salary                  29793 non-null   float64
 11  formatted_work_type         123849 non-null  object 
 12  applies                     23320 non-null   float64
 13  original_listed_time        123849 non-null  float64
 14  remote_allowed              15246 non-null   float64
 15  job_posting_url             123849 non-null  object 
 16  application_url             87184 non-null   object 
 17  application_type            123849 non-null  object 
 18  expiry                      123849 non-null  float64
 19  closed_time                 1073 non-null    float64
 20  formatted_experience_level  94440 non-null   object 
 21  skills_desc                 2439 non-null    object 
 22  listed_time                 123849 non-null  float64
 23  posting_domain              83881 non-null   object 
 24  sponsored                   123849 non-null  int64  
 25  work_type                   123849 non-null  object 
 26  currency                    36073 non-null   object 
 27  compensation_type           36073 non-null   object 
 28  normalized_salary           36073 non-null   float64
 29  zip_code                    102977 non-null  float64
 30  fips                        96434 non-null   float64
dtypes: float64(14), int64(2), object(15)
memory usage: 29.3+ MB
</code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Limpeza de dados inicial, remover colunas sem relevância para o projeto.</span>
df_cleaned = df.drop(columns=[
    <span class="hljs-string">'job_id'</span>, 
    <span class="hljs-string">'company_name'</span>,
    <span class="hljs-string">'company_id'</span>, 
    <span class="hljs-string">'original_listed_time'</span>,
    <span class="hljs-string">'application_type'</span>, 
    <span class="hljs-string">'expiry'</span>, 
    <span class="hljs-string">'closed_time'</span>, 
    <span class="hljs-string">'pay_period'</span>, 
    <span class="hljs-string">'job_posting_url'</span>, 
    <span class="hljs-string">'application_url'</span>, 
    <span class="hljs-string">'posting_domain'</span>, 
    <span class="hljs-string">'sponsored'</span>,
    <span class="hljs-string">'currency'</span>, 
    <span class="hljs-string">'compensation_type'</span>,
    <span class="hljs-string">'normalized_salary'</span>,
    <span class="hljs-string">'max_salary'</span>,
    <span class="hljs-string">'med_salary'</span>,
    <span class="hljs-string">'min_salary'</span>,
    <span class="hljs-string">'zip_code'</span>,
    <span class="hljs-string">'fips'</span>,
    <span class="hljs-string">'work_type'</span>
    
])
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Verificar as colunas restantes</span>
print(df_cleaned.columns)
</div></code></pre>
<pre><code>Index(['title', 'description', 'location', 'views', 'formatted_work_type',
       'applies', 'remote_allowed', 'formatted_experience_level',
       'skills_desc', 'listed_time'],
      dtype='object')
</code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Contar valores ausentes em cada coluna</span>
missing_values = df_cleaned.isnull().sum()
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Exibir apenas as colunas com valores ausentes</span>
print(missing_values[missing_values &gt; <span class="hljs-number">0</span>])
</div></code></pre>
<pre><code>description                        7
views                           1689
applies                       100529
remote_allowed                108603
formatted_experience_level     29409
skills_desc                   121410
dtype: int64
</code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Remover linha com valor ausente em 'description'</span>
df_cleaned = df_cleaned.dropna(subset=[<span class="hljs-string">'description'</span>])
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Preencher valores ausentes em 'views' com 0</span>
df_cleaned[<span class="hljs-string">'views'</span>] = df_cleaned[<span class="hljs-string">'views'</span>].fillna(<span class="hljs-number">0</span>)
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Preencher valores ausentes em 'applies' com 0</span>
df_cleaned[<span class="hljs-string">'applies'</span>] = df_cleaned[<span class="hljs-string">'applies'</span>].fillna(<span class="hljs-number">0</span>)
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Preencher valores ausentes em 'formatted_experience_level' com "não especificado"</span>
df_cleaned[<span class="hljs-string">'formatted_experience_level'</span>] = df_cleaned[<span class="hljs-string">'formatted_experience_level'</span>].fillna(<span class="hljs-string">'Não especificado'</span>)
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Preencher valores ausentes em 'skills_desc' com "não especificado"</span>
df_cleaned[<span class="hljs-string">'skills_desc'</span>] = df_cleaned[<span class="hljs-string">'skills_desc'</span>].fillna(<span class="hljs-string">'Habilidades não especificadas'</span>)
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Verificar novamente há valores ausentes</span>
missing_values_after = df_cleaned.isnull().sum()
print(missing_values_after[missing_values_after &gt; <span class="hljs-number">0</span>])
</div></code></pre>
<pre><code>remote_allowed    108599
dtype: int64
</code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Verificar linhas duplicadas</span>
num_duplicates = df_cleaned.duplicated().sum()
print(<span class="hljs-string">f"Número de linhas duplicadas: <span class="hljs-subst">{num_duplicates}</span>"</span>)
</div></code></pre>
<pre><code>Número de linhas duplicadas: 463
</code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Ver linhas duplicadas:</span>
duplicates = df_cleaned[df_cleaned.duplicated(keep=<span class="hljs-literal">False</span>)]
display(duplicates)
</div></code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>title</th>
      <th>description</th>
      <th>location</th>
      <th>views</th>
      <th>formatted_work_type</th>
      <th>applies</th>
      <th>remote_allowed</th>
      <th>formatted_experience_level</th>
      <th>skills_desc</th>
      <th>listed_time</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1133</th>
      <td>Assistant Claims Examiner (Onsite Irving, Texas)</td>
      <td>Great companies need great teams to propel the...</td>
      <td>Irving, TX</td>
      <td>6.0</td>
      <td>Full-time</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>Mid-Senior level</td>
      <td>Habilidades não especificadas</td>
      <td>1.712349e+12</td>
    </tr>
    <tr>
      <th>1537</th>
      <td>Assistant Claims Examiner (Onsite Irving, Texas)</td>
      <td>Great companies need great teams to propel the...</td>
      <td>Irving, TX</td>
      <td>6.0</td>
      <td>Full-time</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>Mid-Senior level</td>
      <td>Habilidades não especificadas</td>
      <td>1.712349e+12</td>
    </tr>
    <tr>
      <th>2159</th>
      <td>Laborer II- Drill Operator</td>
      <td>Are you ready to join the A-Team and become a ...</td>
      <td>Colorado Springs, CO</td>
      <td>6.0</td>
      <td>Full-time</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>Entry level</td>
      <td>Habilidades não especificadas</td>
      <td>1.712351e+12</td>
    </tr>
    <tr>
      <th>2284</th>
      <td>Laborer II- Drill Operator</td>
      <td>Are you ready to join the A-Team and become a ...</td>
      <td>Colorado Springs, CO</td>
      <td>6.0</td>
      <td>Full-time</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>Entry level</td>
      <td>Habilidades não especificadas</td>
      <td>1.712351e+12</td>
    </tr>
    <tr>
      <th>3614</th>
      <td>Café &amp; Dining Aide, Extra On Call, Rotating</td>
      <td>Employment Type\n\nPart time\n\nShift\n\nRotat...</td>
      <td>Fresno, CA</td>
      <td>5.0</td>
      <td>Part-time</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>Entry level</td>
      <td>Habilidades não especificadas</td>
      <td>1.712377e+12</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>123725</th>
      <td>RN Progressive Care Unit</td>
      <td>Onyx Health Care Staffing is seeking a qualifi...</td>
      <td>Nashville, TN</td>
      <td>4.0</td>
      <td>Full-time</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>Mid-Senior level</td>
      <td>Habilidades não especificadas</td>
      <td>1.713569e+12</td>
    </tr>
    <tr>
      <th>123764</th>
      <td>RN Progressive Care Unit</td>
      <td>Onyx Health Care Staffing is seeking a qualifi...</td>
      <td>Asheville, NC</td>
      <td>5.0</td>
      <td>Full-time</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>Mid-Senior level</td>
      <td>Habilidades não especificadas</td>
      <td>1.713569e+12</td>
    </tr>
    <tr>
      <th>123765</th>
      <td>RN Progressive Care Unit</td>
      <td>Onyx Health Care Staffing is seeking a qualifi...</td>
      <td>Asheville, NC</td>
      <td>5.0</td>
      <td>Full-time</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>Mid-Senior level</td>
      <td>Habilidades não especificadas</td>
      <td>1.713569e+12</td>
    </tr>
    <tr>
      <th>123766</th>
      <td>RN Progressive Care Unit</td>
      <td>Onyx Health Care Staffing is seeking a qualifi...</td>
      <td>Asheville, NC</td>
      <td>5.0</td>
      <td>Full-time</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>Mid-Senior level</td>
      <td>Habilidades não especificadas</td>
      <td>1.713569e+12</td>
    </tr>
    <tr>
      <th>123767</th>
      <td>RN Progressive Care Unit</td>
      <td>Onyx Health Care Staffing is seeking a qualifi...</td>
      <td>Nashville, TN</td>
      <td>4.0</td>
      <td>Full-time</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>Mid-Senior level</td>
      <td>Habilidades não especificadas</td>
      <td>1.713569e+12</td>
    </tr>
  </tbody>
</table>
<p>833 rows × 10 columns</p>
</div>
<pre class="hljs"><code><div><span class="hljs-comment"># Remover duplicatas com base nas colunas 'title', 'description' e 'location'</span>
df_cleaned = df_cleaned.drop_duplicates(subset=[<span class="hljs-string">'title'</span>, <span class="hljs-string">'description'</span>, <span class="hljs-string">'location'</span>], keep=<span class="hljs-string">'first'</span>)
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Verificar se ainda há duplicatas</span>
duplicated_rows = df_cleaned[df_cleaned.duplicated(subset=[<span class="hljs-string">'title'</span>, <span class="hljs-string">'description'</span>, <span class="hljs-string">'location'</span>])]

<span class="hljs-comment"># Exibir o número de duplicatas restantes</span>
print(<span class="hljs-string">f"Número de duplicatas restantes: <span class="hljs-subst">{duplicated_rows.shape[<span class="hljs-number">0</span>]}</span>"</span>)
</div></code></pre>
<pre><code>Número de duplicatas restantes: 0
</code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Se 'listed_time' não estiver no tipo datetime, faça a conversão</span>
<span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> pd.api.types.is_datetime64_any_dtype(df_cleaned[<span class="hljs-string">'listed_time'</span>]):
    <span class="hljs-comment"># Ajustar 'listed_time' de milissegundos</span>
    df_cleaned[<span class="hljs-string">'listed_time'</span>] = df_cleaned[<span class="hljs-string">'listed_time'</span>] / <span class="hljs-number">1000</span>

    <span class="hljs-comment"># Converter 'listed_time' para datetime</span>
    df_cleaned[<span class="hljs-string">'listed_time'</span>] = pd.to_datetime(df_cleaned[<span class="hljs-string">'listed_time'</span>], unit=<span class="hljs-string">'s'</span>, origin=<span class="hljs-string">'unix'</span>)
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Verificar tamanho do df limpo</span>
df_cleaned.shape
</div></code></pre>
<pre><code>(119006, 10)
</code></pre>
<pre class="hljs"><code><div><span class="hljs-comment">########################################################################</span>
<span class="hljs-comment">################################## EDA #################################</span>
<span class="hljs-comment">########################################################################</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Extrair o mês de publicação das vagas</span>
df_cleaned[<span class="hljs-string">'month'</span>] = df_cleaned[<span class="hljs-string">'listed_time'</span>].dt.to_period(<span class="hljs-string">'M'</span>)

<span class="hljs-comment"># Criar coluna do mês</span>
df_cleaned[<span class="hljs-string">'month'</span>] = df_cleaned[<span class="hljs-string">'listed_time'</span>].dt.to_period(<span class="hljs-string">'M'</span>)
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Agrupar dados pelo mês e contar número de vagas</span>
monthly_counts = df_cleaned.groupby(<span class="hljs-string">'month'</span>).size()
</div></code></pre>
<pre class="hljs"><code><div>print(monthly_counts)
</div></code></pre>
<pre><code>month
2024-03         1
2024-04    119005
Freq: M, dtype: int64
</code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Filtrar para manter apenas as vagas de abril de 2024</span>
df_cleaned = df_cleaned.loc[df_cleaned[<span class="hljs-string">'month'</span>] == <span class="hljs-string">'2024-04'</span>]
</div></code></pre>
<pre class="hljs"><code><div>print(df_cleaned[<span class="hljs-string">'listed_time'</span>].unique())
</div></code></pre>
<pre><code>&lt;DatetimeArray&gt;
['2024-04-17 23:45:08', '2024-04-11 17:51:27', '2024-04-16 14:26:54',
 '2024-04-12 04:23:32', '2024-04-18 14:52:23', '2024-04-18 16:01:39',
 '2024-04-11 18:43:39', '2024-04-06 22:44:12', '2024-04-05 20:21:40',
 '2024-04-07 02:12:35',
 ...
 '2024-04-20 00:23:13', '2024-04-20 00:26:30', '2024-04-19 23:52:56',
 '2024-04-19 23:55:40', '2024-04-20 00:00:12', '2024-04-20 00:25:51',
 '2024-04-20 00:20:31', '2024-04-20 00:00:23', '2024-04-20 00:23:52',
 '2024-04-20 00:23:36']
Length: 52176, dtype: datetime64[ns]
</code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># O resultado não é o que eu esperava, pois os posts de vagas referem-se apenas a um único mês de 2024. Sendo assim</span>
<span class="hljs-comment"># vou mudar o objetivo inicial do projeto para analisar a distribuição de vagas por tipo de trabalho, formato,  localização,</span>
<span class="hljs-comment"># por nível de experiencia requerido, correlação entre visualizações e aplicações e tendências em relação as habilidades requeridas.</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment">########################################################################</span>
<span class="hljs-comment">############## 1 - Análise de Vagas por Tipo de Contrato ##############</span>
<span class="hljs-comment">########################################################################</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># CONTEXTO:</span>
<span class="hljs-comment"># Esta análise tem como objetivo entender a distribuição das vagas de emprego de acordo com os tipos de contrato disponíveis.</span>
<span class="hljs-comment"># Sabemos que os tipos de contrato podem influenciar a estabilidade do cargo, a flexibilidade de horário e o perfil do trabalhador. </span>
<span class="hljs-comment"># Ao analisar essas informações, podemos identificar quais formas de trabalho são mais predominantes no mercado.</span>
</div></code></pre>
<pre class="hljs"><code><div>work_type_counts = df_cleaned[<span class="hljs-string">'formatted_work_type'</span>].value_counts()
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Contar a quantidade de vagas por tipo de trabalho</span>
work_type_counts = df_cleaned[<span class="hljs-string">'formatted_work_type'</span>].value_counts()

<span class="hljs-comment"># Converter para DataFrame para melhor visualização</span>
work_type_counts_df = work_type_counts.reset_index()
work_type_counts_df.columns = [<span class="hljs-string">'Tipo de Trabalho'</span>, <span class="hljs-string">'Número de Vagas'</span>]

<span class="hljs-comment"># Exibir a tabela</span>
print(work_type_counts_df)
</div></code></pre>
<pre><code>  Tipo de Trabalho  Número de Vagas
0        Full-time            86230
1         Contract             9602
2        Part-time             8925
3        Temporary             1079
4       Internship              759
5        Volunteer              426
6            Other              387
</code></pre>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> seaborn <span class="hljs-keyword">as</span> sns
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> matplotlib <span class="hljs-keyword">as</span> mpl
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">from</span> matplotlib.patches <span class="hljs-keyword">import</span> PathPatch
<span class="hljs-keyword">from</span> matplotlib.path <span class="hljs-keyword">import</span> Path

<span class="hljs-comment"># Configurações globais para o matplotlib</span>
mpl.rcParams[<span class="hljs-string">'font.family'</span>] = <span class="hljs-string">'Arial'</span>  <span class="hljs-comment"># Define a fonte como Arial</span>
mpl.rcParams[<span class="hljs-string">'axes.titlesize'</span>] = <span class="hljs-number">18</span>    <span class="hljs-comment"># Tamanho do título do gráfico</span>
mpl.rcParams[<span class="hljs-string">'axes.labelsize'</span>] = <span class="hljs-number">12</span>    <span class="hljs-comment"># Tamanho dos rótulos dos eixos</span>
mpl.rcParams[<span class="hljs-string">'xtick.labelsize'</span>] = <span class="hljs-number">10</span>   <span class="hljs-comment"># Tamanho dos rótulos do eixo x</span>
mpl.rcParams[<span class="hljs-string">'ytick.labelsize'</span>] = <span class="hljs-number">10</span>   <span class="hljs-comment"># Tamanho dos rótulos do eixo </span>

<span class="hljs-comment"># Configuração do estilo com seaborn e paleta de cores</span>
sns.set(style=<span class="hljs-string">"whitegrid"</span>)  <span class="hljs-comment"># Define o estilo do gráfico como whitegrid</span>
sns.set_palette(<span class="hljs-string">"plasma"</span>)   <span class="hljs-comment"># Define a paleta de cores padrão como "plasma"</span>

<span class="hljs-comment"># Criar o gráfico de barras horizontais</span>
plt.figure(figsize=(<span class="hljs-number">14</span>, <span class="hljs-number">8</span>))  <span class="hljs-comment"># Aumentando o tamanho da figura</span>
ax = sns.barplot(
    x=<span class="hljs-string">'Número de Vagas'</span>,
    y=<span class="hljs-string">'Tipo de Trabalho'</span>,
    data=work_type_counts_df,
    errorbar=<span class="hljs-literal">None</span>,  <span class="hljs-comment"># Substituir o `ci` por `errorbar=None` para evitar o aviso de depreciação</span>
)

<span class="hljs-comment"># Aplicar um gradiente de cor usando a paleta plasma</span>
norm = mpl.colors.Normalize(vmin=<span class="hljs-number">0</span>, vmax=len(ax.patches))
cmap = plt.get_cmap(<span class="hljs-string">"plasma"</span>)

<span class="hljs-comment"># Função para arredondar as barras</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">round_bars</span><span class="hljs-params">(patch, color, rounding_size=<span class="hljs-number">10</span>)</span>:</span>
    <span class="hljs-comment"># Obter a posição da barra</span>
    x0, y0 = patch.get_xy()  <span class="hljs-comment"># Posição de origem</span>
    width, height = patch.get_width(), patch.get_height()  <span class="hljs-comment"># Largura e altura da barra</span>
    
    <span class="hljs-comment"># Definir o caminho para a barra arredondada</span>
    verts = [
        (x0 + rounding_size, y0),  <span class="hljs-comment"># Começo arredondado</span>
        (x0 + width - rounding_size, y0),
        (x0 + width, y0 + rounding_size),  <span class="hljs-comment"># Arredondamento da borda superior</span>
        (x0 + width, y0 + height - rounding_size),
        (x0 + width - rounding_size, y0 + height),
        (x0 + rounding_size, y0 + height),
        (x0, y0 + height - rounding_size),  <span class="hljs-comment"># Arredondamento da borda inferior</span>
        (x0, y0 + rounding_size)
    ]
    
    <span class="hljs-comment"># Fechar o caminho (voltar ao início)</span>
    verts.append(verts[<span class="hljs-number">0</span>])

    <span class="hljs-comment"># Criar o Path e o Patch</span>
    path = Path(verts, closed=<span class="hljs-literal">True</span>)
    patch.set_facecolor(color)  <span class="hljs-comment"># Aplica a cor gradiente</span>
    patch.set_edgecolor(<span class="hljs-string">"white"</span>)  <span class="hljs-comment"># Define a cor da borda como branca</span>
    patch.set_linewidth(<span class="hljs-number">2</span>)  <span class="hljs-comment"># Define a espessura da borda</span>
    
    <span class="hljs-comment"># Substituir o patch original pelo novo com bordas arredondadas</span>
    path_patch = PathPatch(path, facecolor=color, edgecolor=<span class="hljs-string">"white"</span>, lw=<span class="hljs-number">2</span>)
    ax.add_patch(path_patch)
    patch.remove()  <span class="hljs-comment"># Remove o patch original</span>

<span class="hljs-comment"># Arredondar as barras e aplicar o gradiente de cores</span>
<span class="hljs-keyword">for</span> i, patch <span class="hljs-keyword">in</span> enumerate(ax.patches):
    <span class="hljs-comment"># Calculando o valor para a cor gradiente</span>
    color = cmap(norm(i))  <span class="hljs-comment"># Aplica um gradiente na cor da barra</span>
    round_bars(patch, color)

<span class="hljs-comment"># Ajustar o visual do gráfico</span>
plt.title(<span class="hljs-string">'Distribuição de Vagas por Tipo de Contrato'</span>, fontsize=<span class="hljs-number">18</span>, fontweight=<span class="hljs-string">'bold'</span>, color=<span class="hljs-string">'black'</span>, pad=<span class="hljs-number">30</span>)
plt.xlabel(<span class="hljs-string">'Número de Vagas'</span>, fontsize=<span class="hljs-number">14</span>, color=<span class="hljs-string">'darkred'</span>, labelpad=<span class="hljs-number">20</span>)  <span class="hljs-comment"># Cor personalizada e aumento do espaçamento</span>
plt.ylabel(<span class="hljs-string">'Tipo de Trabalho'</span>, fontsize=<span class="hljs-number">14</span>, color=<span class="hljs-string">'darkblue'</span>, labelpad=<span class="hljs-number">20</span>)  <span class="hljs-comment"># Cor personalizada e aumento do espaçamento</span>

<span class="hljs-comment"># Remover as linhas do fundo (grid e bordas)</span>
ax.grid(<span class="hljs-literal">False</span>)  <span class="hljs-comment"># Remove o grid do gráfico</span>
<span class="hljs-keyword">for</span> spine <span class="hljs-keyword">in</span> ax.spines.values():
    spine.set_visible(<span class="hljs-literal">False</span>)  <span class="hljs-comment"># Remove as bordas (spines) do gráfico</span>

<span class="hljs-comment"># Remover a legenda desnecessária</span>
plt.legend([], [], frameon=<span class="hljs-literal">False</span>)

<span class="hljs-comment"># Melhorar o layout para evitar cortes</span>
plt.tight_layout()

<span class="hljs-comment"># Gravar gráfico em png na pasta do website</span>
output_dir = <span class="hljs-string">'/Users/elisadrummond/projeto-tendencias-empregos/static/graphs'</span>
<span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(output_dir):
    os.makedirs(output_dir)

<span class="hljs-comment"># Salvar o gráfico</span>
graph_path = os.path.join(output_dir, <span class="hljs-string">'grafico1_tipo_contrato_moderno.png'</span>)
plt.savefig(graph_path, dpi=<span class="hljs-number">300</span>, bbox_inches=<span class="hljs-string">'tight'</span>)  <span class="hljs-comment"># Aumentar a resolução para maior qualidade</span>

<span class="hljs-comment"># Exibir o gráfico</span>
plt.show()

<span class="hljs-comment"># Fechar a figura após salvar</span>
plt.close()

<span class="hljs-comment"># Mensagem de confirmação</span>
print(<span class="hljs-string">f"Gráfico salvo em: <span class="hljs-subst">{graph_path}</span>"</span>)
</div></code></pre>
<p><img src="output_33_0.png" alt="png"></p>
<pre><code>Gráfico salvo em: /Users/elisadrummond/projeto-tendencias-empregos/static/graphs/grafico1_tipo_contrato_moderno.png
</code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># INSIGHTS: O gráfico revela vagas mais comuns são para Full-time, seguidas por Contract e Part-time. Este padrão indica que as empresas </span>
<span class="hljs-comment"># preferem ofertas de trabalho com contratos de tempo integral ou por prazo determinado, o que pode refletir uma demanda maior por </span>
<span class="hljs-comment"># estabilidade e comprometimento de longo prazo. As vagas para Internship, Volunteer, e Temporary são significativamente menores, </span>
<span class="hljs-comment"># sugerindo que o mercado oferece poucas oportunidades temporárias ou de estágio, o que pode limitar as opções para iniciantes ou </span>
<span class="hljs-comment"># aqueles que buscam experiência em áreas específicas.</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment">########################################################################</span>
<span class="hljs-comment">############ 2 - Análise de Vagas por Formato de Trabalho  #############</span>
<span class="hljs-comment">########################################################################</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># CONTEXTO:</span>
<span class="hljs-comment"># A coluna remote_allowed descreve a possibilidade de trabalho remoto nas vagas de emprego.</span>
<span class="hljs-comment"># "Não Permitido" indica que o trabalho remoto não é uma opção para a vaga, enquanto "Permitido" significa que o trabalho remoto é permitido.</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Exibir os valores únicos presentes na coluna 'remote_allowed'</span>
formats = df_cleaned[<span class="hljs-string">'remote_allowed'</span>].unique()

<span class="hljs-comment"># Mostrar os formatos</span>
print(<span class="hljs-string">"Formatos disponíveis em 'remote_allowed':"</span>)
print(formats)
</div></code></pre>
<pre><code>Formatos disponíveis em 'remote_allowed':
[nan  1.]
</code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Contar a ocorrência de cada valor na coluna 'remote_allowed'</span>
remote_allowed_counts = df_cleaned[<span class="hljs-string">'remote_allowed'</span>].value_counts(dropna=<span class="hljs-literal">False</span>)

<span class="hljs-comment"># Exibir os resultados</span>
print(<span class="hljs-string">"Contagem de formatos em 'remote_allowed':"</span>)
print(remote_allowed_counts)
</div></code></pre>
<pre><code>Contagem de formatos em 'remote_allowed':
remote_allowed
NaN    104479
1.0     14526
Name: count, dtype: int64
</code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Substituir 1 por 'Permitido' e NaN por 'Não Permitido'</span>
df_cleaned[<span class="hljs-string">'remote_allowed'</span>] = df_cleaned[<span class="hljs-string">'remote_allowed'</span>].replace({<span class="hljs-number">1.0</span>: <span class="hljs-string">'Permitido'</span>, np.nan: <span class="hljs-string">'Não Permitido'</span>})

<span class="hljs-comment"># Contar a quantidade de vagas por categoria</span>
remote_allowed_counts = df_cleaned[<span class="hljs-string">'remote_allowed'</span>].value_counts()

<span class="hljs-comment"># Converter para um DataFrame para melhor visualização</span>
remote_allowed_table = remote_allowed_counts.reset_index()
remote_allowed_table.columns = [<span class="hljs-string">'Trabalho Remoto'</span>, <span class="hljs-string">'Número de Vagas'</span>]

<span class="hljs-comment"># Exibir a tabela</span>
print(remote_allowed_table)
</div></code></pre>
<pre><code>  Trabalho Remoto  Número de Vagas
0   Não Permitido           104479
1       Permitido            14526
</code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Criar o gráfico de pizza no padrão solicitado</span>
plt.figure(figsize=(<span class="hljs-number">10</span>, <span class="hljs-number">6</span>))  <span class="hljs-comment"># Tamanho proporcional</span>

<span class="hljs-comment"># Normalizar os índices para aplicar o gradiente</span>
norm = mpl.colors.Normalize(vmin=<span class="hljs-number">0</span>, vmax=len(remote_allowed_counts))
cmap = plt.get_cmap(<span class="hljs-string">"plasma"</span>)

<span class="hljs-comment"># Preparar dados para o gráfico de pizza</span>
patches, texts, autotexts = plt.pie(
    remote_allowed_counts, 
    labels=<span class="hljs-literal">None</span>,  <span class="hljs-comment"># Remove as legendas padrão</span>
    autopct=<span class="hljs-string">'%1.1f%%'</span>, 
    startangle=<span class="hljs-number">90</span>, 
    colors=[cmap(norm(i)) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(remote_allowed_counts))],
    wedgeprops=dict(edgecolor=<span class="hljs-string">'white'</span>, linewidth=<span class="hljs-number">1.5</span>)  <span class="hljs-comment"># Bordas brancas mais sutis</span>
)

<span class="hljs-comment"># Criar a legenda separada</span>
plt.legend(
    labels=remote_allowed_counts.index,
    loc=<span class="hljs-string">'center left'</span>,  <span class="hljs-comment"># Posicionamento à esquerda</span>
    bbox_to_anchor=(<span class="hljs-number">1</span>, <span class="hljs-number">0.5</span>),  <span class="hljs-comment"># Afastar a legenda do gráfico</span>
    fontsize=<span class="hljs-number">12</span>  <span class="hljs-comment"># Tamanho da fonte consistente com o gráfico de barras</span>
)

<span class="hljs-comment"># Ajustar os autotextos (percentuais dentro do gráfico)</span>
<span class="hljs-keyword">for</span> autotext <span class="hljs-keyword">in</span> autotexts:
    autotext.set_fontsize(<span class="hljs-number">11</span>)
    autotext.set_color(<span class="hljs-string">'white'</span>)  <span class="hljs-comment"># Percentuais em branco para contraste</span>

<span class="hljs-comment"># Ajustar o título do gráfico</span>
plt.title(<span class="hljs-string">'Permissão de Trabalho Remoto'</span>, fontsize=<span class="hljs-number">16</span>, fontweight=<span class="hljs-string">'bold'</span>, color=<span class="hljs-string">'black'</span>, pad=<span class="hljs-number">20</span>)

<span class="hljs-comment"># Melhorar o layout para evitar cortes</span>
plt.tight_layout()

<span class="hljs-comment"># Gravar gráfico em png na pasta do website</span>
output_dir = <span class="hljs-string">'/Users/elisadrummond/projeto-tendencias-empregos/static/graphs'</span>
<span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(output_dir):
    os.makedirs(output_dir)

<span class="hljs-comment"># Salvar o gráfico</span>
graph_path = os.path.join(output_dir, <span class="hljs-string">'grafico2_remoto_permitido.png'</span>)
plt.savefig(graph_path, dpi=<span class="hljs-number">300</span>, bbox_inches=<span class="hljs-string">'tight'</span>)  <span class="hljs-comment"># Aumentar a resolução para maior qualidade</span>

<span class="hljs-comment"># Exibir o gráfico</span>
plt.show()

<span class="hljs-comment"># Fechar a figura após salvar</span>
plt.close()

<span class="hljs-comment"># Mensagem de confirmação</span>
print(<span class="hljs-string">f"Gráfico salvo em: <span class="hljs-subst">{graph_path}</span>"</span>)

</div></code></pre>
<p><img src="output_40_0.png" alt="png"></p>
<pre><code>Gráfico salvo em: /Users/elisadrummond/projeto-tendencias-empregos/static/graphs/grafico2_remoto_permitido.png
</code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># INSIGHTS:</span>
<span class="hljs-comment"># A discrepância entre as vagas com "trabalho remoto permitido" e "não permitido" sugere que muitas empresas ainda estão em processo </span>
<span class="hljs-comment"># de adaptação ao modelo remoto, ou até mesmo limitam a flexibilidade para certas posições.</span>
<span class="hljs-comment"># Isso pode refletir uma tendência que, embora crescente, ainda não é universal no mercado de trabalho, especialmente em áreas que </span>
<span class="hljs-comment"># exigem presença física ou operações no local de trabalho.</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment">########################################################################</span>
<span class="hljs-comment">################ 3 - Análise de Vagas por Localização  #################</span>
<span class="hljs-comment">########################################################################</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># CONTEXTO: </span>
<span class="hljs-comment"># A análise examina a distribuição de vagas agrupadas por estados norte-americanos. </span>
<span class="hljs-comment"># Com esses dados, é possível identificar os estados que concentram mais oportunidades de trabalho e avaliar sua participação relativa </span>
<span class="hljs-comment"># no total de vagas</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Contar a quantidade de vagas por localização</span>
location_counts = df_cleaned[<span class="hljs-string">'location'</span>].value_counts()

<span class="hljs-comment"># Converter para DataFrame para melhor visualização</span>
location_counts_df = location_counts.reset_index()
location_counts_df.columns = [<span class="hljs-string">'Localização'</span>, <span class="hljs-string">'Número de Vagas'</span>]

<span class="hljs-comment"># Exibir a tabela</span>
print(location_counts_df)

</div></code></pre>
<pre><code>                Localização  Número de Vagas
0             United States             7818
1              New York, NY             2688
2               Chicago, IL             1799
3               Houston, TX             1678
4                Dallas, TX             1340
...                     ...              ...
8521        Kent County, RI                1
8522            Cusseta, AL                1
8523  Greater Columbus Area                1
8524           Lovelock, NV                1
8525     Carroll County, MD                1

[8526 rows x 2 columns]
</code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Explorar melhor a localização para ver se há mais limpeza a ser feita</span>

<span class="hljs-comment"># Extrair o estado da coluna location</span>
df_cleaned[<span class="hljs-string">'estado'</span>] = df_cleaned[<span class="hljs-string">'location'</span>].str.extract(<span class="hljs-string">r',\s*([A-Z]{2})'</span>)[<span class="hljs-number">0</span>]

<span class="hljs-comment"># Contar a quantidade de vagas por estado</span>
state_counts = df_cleaned[<span class="hljs-string">'estado'</span>].value_counts()

<span class="hljs-comment"># Converter para DataFrame para melhor visualização</span>
state_counts_df = state_counts.reset_index()
state_counts_df.columns = [<span class="hljs-string">'Estado'</span>, <span class="hljs-string">'Número de Vagas'</span>]

<span class="hljs-comment"># Exibir a tabela</span>
print(state_counts_df)
</div></code></pre>
<pre><code>   Estado  Número de Vagas
0      CA            11197
1      TX             9858
2      NY             5836
3      FL             5709
4      NC             4749
5      IL             4323
6      PA             3909
7      VA             3522
8      MA             3357
9      GA             3349
10     OH             3296
11     NJ             3178
12     MI             2665
13     WA             2638
14     AZ             2395
15     CO             2258
16     MD             1916
17     TN             1832
18     MN             1810
19     MO             1803
20     WI             1797
21     IN             1737
22     SC             1429
23     KY             1140
24     OR             1138
25     CT             1136
26     LA              954
27     IA              949
28     UT              946
29     AL              941
30     DC              859
31     NV              857
32     KS              855
33     OK              769
34     AR              634
35     NE              570
36     NH              545
37     NM              481
38     ID              410
39     HI              409
40     WV              396
41     MS              379
42     ME              364
43     DE              312
44     RI              301
45     MT              232
46     ND              232
47     AK              204
48     VT              175
49     SD              159
50     WY              118
51     ON                1
52     QC                1
</code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Somar o total de vagas</span>
total_vagas = state_counts_df[<span class="hljs-string">'Número de Vagas'</span>].sum()

<span class="hljs-comment"># Exibir o total de vagas</span>
print(<span class="hljs-string">f'Total de Vagas: <span class="hljs-subst">{total_vagas}</span>'</span>)

<span class="hljs-comment"># Calcular o percentual para cada estado</span>
state_counts_df[<span class="hljs-string">'Percentual'</span>] = (state_counts_df[<span class="hljs-string">'Número de Vagas'</span>] / total_vagas) * <span class="hljs-number">100</span>

<span class="hljs-comment"># Exibir a tabela com percentuais</span>
print(state_counts_df)
</div></code></pre>
<pre><code>Total de Vagas: 101030
   Estado  Número de Vagas  Percentual
0      CA            11197   11.082847
1      TX             9858    9.757498
2      NY             5836    5.776502
3      FL             5709    5.650797
4      NC             4749    4.700584
5      IL             4323    4.278927
6      PA             3909    3.869148
7      VA             3522    3.486093
8      MA             3357    3.322775
9      GA             3349    3.314857
10     OH             3296    3.262397
11     NJ             3178    3.145600
12     MI             2665    2.637830
13     WA             2638    2.611106
14     AZ             2395    2.370583
15     CO             2258    2.234980
16     MD             1916    1.896466
17     TN             1832    1.813323
18     MN             1810    1.791547
19     MO             1803    1.784618
20     WI             1797    1.778680
21     IN             1737    1.719291
22     SC             1429    1.414431
23     KY             1140    1.128378
24     OR             1138    1.126398
25     CT             1136    1.124418
26     LA              954    0.944274
27     IA              949    0.939325
28     UT              946    0.936356
29     AL              941    0.931407
30     DC              859    0.850243
31     NV              857    0.848263
32     KS              855    0.846283
33     OK              769    0.761160
34     AR              634    0.627536
35     NE              570    0.564189
36     NH              545    0.539444
37     NM              481    0.476096
38     ID              410    0.405820
39     HI              409    0.404830
40     WV              396    0.391963
41     MS              379    0.375136
42     ME              364    0.360289
43     DE              312    0.308819
44     RI              301    0.297931
45     MT              232    0.229635
46     ND              232    0.229635
47     AK              204    0.201920
48     VT              175    0.173216
49     SD              159    0.157379
50     WY              118    0.116797
51     ON                1    0.000990
52     QC                1    0.000990
</code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># O número de vagas ficou diferente do número de linhas do dataset.</span>

<span class="hljs-comment">#Contar quantas linhas têm localização válida</span>
localizacao_valida = df_cleaned[df_cleaned[<span class="hljs-string">'location'</span>].notnull()]

<span class="hljs-comment"># Total de linhas com localização válida</span>
total_localizacao_valida = localizacao_valida.shape[<span class="hljs-number">0</span>]
print(<span class="hljs-string">f'Total de linhas com localização válida: <span class="hljs-subst">{total_localizacao_valida}</span>'</span>)

</div></code></pre>
<pre><code>Total de linhas com localização válida: 119005
</code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Comparar total de linhas no DataFrame com o total de vagas por estado</span>
print(<span class="hljs-string">f'Total de linhas no DataFrame: <span class="hljs-subst">{df_cleaned.shape[<span class="hljs-number">0</span>]}</span>'</span>)
print(<span class="hljs-string">f'Total de vagas por estado: <span class="hljs-subst">{state_counts_df[<span class="hljs-string">"Número de Vagas"</span>].sum()}</span>'</span>)

</div></code></pre>
<pre><code>Total de linhas no DataFrame: 119005
Total de vagas por estado: 101030
</code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Verificar quais registros não têm uma localização válida</span>
registros_sem_localizacao = df_cleaned[df_cleaned[<span class="hljs-string">'location'</span>].isnull() | (df_cleaned[<span class="hljs-string">'location'</span>] == <span class="hljs-string">''</span>)]

<span class="hljs-comment"># Exibir alguns desses registros</span>
print(registros_sem_localizacao)
print(<span class="hljs-string">f'Número de registros sem localização: <span class="hljs-subst">{registros_sem_localizacao.shape[<span class="hljs-number">0</span>]}</span>'</span>)

</div></code></pre>
<pre><code>Empty DataFrame
Columns: [title, description, location, views, formatted_work_type, applies, remote_allowed, formatted_experience_level, skills_desc, listed_time, month, estado]
Index: []
Número de registros sem localização: 0
</code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Verificar a presença de valores nulos em todo o DataFrame</span>
print(df_cleaned.isnull().sum())
</div></code></pre>
<pre><code>title                             0
description                       0
location                          0
views                             0
formatted_work_type               0
applies                           0
remote_allowed                    0
formatted_experience_level        0
skills_desc                       0
listed_time                       0
month                             0
estado                        17975
dtype: int64
</code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Identificado que a coluna que possui erros: Estado.</span>

<span class="hljs-comment"># Exibir registros que não têm estado</span>
registros_sem_estado = df_cleaned[df_cleaned[<span class="hljs-string">'estado'</span>].isnull() | (df_cleaned[<span class="hljs-string">'estado'</span>] == <span class="hljs-string">''</span>)]

<span class="hljs-comment"># Exibir alguns desses registros</span>
print(registros_sem_estado[[<span class="hljs-string">'location'</span>]])  <span class="hljs-comment"># Apenas a coluna location para foco</span>
print(<span class="hljs-string">f'Número de registros sem estado: <span class="hljs-subst">{registros_sem_estado.shape[<span class="hljs-number">0</span>]}</span>'</span>)
</div></code></pre>
<pre><code>                             location
6                       United States
14                      United States
18               Greater Philadelphia
22      Los Angeles Metropolitan Area
27          New Jersey, United States
...                               ...
123839           Greater Indianapolis
123841                  United States
123842                  United States
123845                  United States
123847           Texas, United States

[17975 rows x 1 columns]
Número de registros sem estado: 17975
</code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Para resolver o problema, vou criar uma bibioteca para mapeamento dos estados e criar comparar o nome à sigla,</span>
<span class="hljs-comment"># e de pois atribuir a sigla do estado com uma funçao SE:</span>
<span class="hljs-comment"># Dicionário de mapeamento de estados </span>
estado_mapping = {
    <span class="hljs-string">'Alabama'</span>: <span class="hljs-string">'AL'</span>,
    <span class="hljs-string">'Alaska'</span>: <span class="hljs-string">'AK'</span>,
    <span class="hljs-string">'Arizona'</span>: <span class="hljs-string">'AZ'</span>,
    <span class="hljs-string">'Arkansas'</span>: <span class="hljs-string">'AR'</span>,
    <span class="hljs-string">'California'</span>: <span class="hljs-string">'CA'</span>,
    <span class="hljs-string">'Colorado'</span>: <span class="hljs-string">'CO'</span>,
    <span class="hljs-string">'Connecticut'</span>: <span class="hljs-string">'CT'</span>,
    <span class="hljs-string">'Delaware'</span>: <span class="hljs-string">'DE'</span>,
    <span class="hljs-string">'Florida'</span>: <span class="hljs-string">'FL'</span>,
    <span class="hljs-string">'Georgia'</span>: <span class="hljs-string">'GA'</span>,
    <span class="hljs-string">'Hawaii'</span>: <span class="hljs-string">'HI'</span>,
    <span class="hljs-string">'Idaho'</span>: <span class="hljs-string">'ID'</span>,
    <span class="hljs-string">'Illinois'</span>: <span class="hljs-string">'IL'</span>,
    <span class="hljs-string">'Indiana'</span>: <span class="hljs-string">'IN'</span>,
    <span class="hljs-string">'Iowa'</span>: <span class="hljs-string">'IA'</span>,
    <span class="hljs-string">'Kansas'</span>: <span class="hljs-string">'KS'</span>,
    <span class="hljs-string">'Kentucky'</span>: <span class="hljs-string">'KY'</span>,
    <span class="hljs-string">'Louisiana'</span>: <span class="hljs-string">'LA'</span>,
    <span class="hljs-string">'Maine'</span>: <span class="hljs-string">'ME'</span>,
    <span class="hljs-string">'Maryland'</span>: <span class="hljs-string">'MD'</span>,
    <span class="hljs-string">'Massachusetts'</span>: <span class="hljs-string">'MA'</span>,
    <span class="hljs-string">'Michigan'</span>: <span class="hljs-string">'MI'</span>,
    <span class="hljs-string">'Minnesota'</span>: <span class="hljs-string">'MN'</span>,
    <span class="hljs-string">'Mississippi'</span>: <span class="hljs-string">'MS'</span>,
    <span class="hljs-string">'Missouri'</span>: <span class="hljs-string">'MO'</span>,
    <span class="hljs-string">'Montana'</span>: <span class="hljs-string">'MT'</span>,
    <span class="hljs-string">'Nebraska'</span>: <span class="hljs-string">'NE'</span>,
    <span class="hljs-string">'Nevada'</span>: <span class="hljs-string">'NV'</span>,
    <span class="hljs-string">'New Hampshire'</span>: <span class="hljs-string">'NH'</span>,
    <span class="hljs-string">'New Jersey'</span>: <span class="hljs-string">'NJ'</span>,
    <span class="hljs-string">'New Mexico'</span>: <span class="hljs-string">'NM'</span>,
    <span class="hljs-string">'New York'</span>: <span class="hljs-string">'NY'</span>,
    <span class="hljs-string">'North Carolina'</span>: <span class="hljs-string">'NC'</span>,
    <span class="hljs-string">'North Dakota'</span>: <span class="hljs-string">'ND'</span>,
    <span class="hljs-string">'Ohio'</span>: <span class="hljs-string">'OH'</span>,
    <span class="hljs-string">'Oklahoma'</span>: <span class="hljs-string">'OK'</span>,
    <span class="hljs-string">'Oregon'</span>: <span class="hljs-string">'OR'</span>,
    <span class="hljs-string">'Pennsylvania'</span>: <span class="hljs-string">'PA'</span>,
    <span class="hljs-string">'Rhode Island'</span>: <span class="hljs-string">'RI'</span>,
    <span class="hljs-string">'South Carolina'</span>: <span class="hljs-string">'SC'</span>,
    <span class="hljs-string">'South Dakota'</span>: <span class="hljs-string">'SD'</span>,
    <span class="hljs-string">'Tennessee'</span>: <span class="hljs-string">'TN'</span>,
    <span class="hljs-string">'Texas'</span>: <span class="hljs-string">'TX'</span>,
    <span class="hljs-string">'Utah'</span>: <span class="hljs-string">'UT'</span>,
    <span class="hljs-string">'Vermont'</span>: <span class="hljs-string">'VT'</span>,
    <span class="hljs-string">'Virginia'</span>: <span class="hljs-string">'VA'</span>,
    <span class="hljs-string">'Washington'</span>: <span class="hljs-string">'WA'</span>,
    <span class="hljs-string">'West Virginia'</span>: <span class="hljs-string">'WV'</span>,
    <span class="hljs-string">'Wisconsin'</span>: <span class="hljs-string">'WI'</span>,
    <span class="hljs-string">'Wyoming'</span>: <span class="hljs-string">'WY'</span>
}

</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Função para mapear os estados</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">map_estado</span><span class="hljs-params">(location)</span>:</span>
    <span class="hljs-keyword">for</span> estado, sigla <span class="hljs-keyword">in</span> estado_mapping.items():
        <span class="hljs-keyword">if</span> estado <span class="hljs-keyword">in</span> location:
            <span class="hljs-keyword">return</span> sigla
    <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>  <span class="hljs-comment"># Retorna None se não encontrar nenhum estado</span>

<span class="hljs-comment"># Aplicar a função para preencher a coluna 'estado'</span>
df_cleaned[<span class="hljs-string">'estado'</span>] = df_cleaned.apply(<span class="hljs-keyword">lambda</span> x: map_estado(x[<span class="hljs-string">'location'</span>]) <span class="hljs-keyword">if</span> pd.isnull(x[<span class="hljs-string">'estado'</span>]) <span class="hljs-keyword">else</span> x[<span class="hljs-string">'estado'</span>], axis=<span class="hljs-number">1</span>)

<span class="hljs-comment"># Verificar a quantidade de estados preenchidos</span>
print(<span class="hljs-string">f'Número de registros sem estado após a substituição: <span class="hljs-subst">{df_cleaned[<span class="hljs-string">"estado"</span>].isnull().sum()}</span>'</span>)
</div></code></pre>
<pre><code>Número de registros sem estado após a substituição: 11597
</code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Exibir registros que ainda estão sem estado</span>
registros_sem_estado = df_cleaned[df_cleaned[<span class="hljs-string">'estado'</span>].isnull() | (df_cleaned[<span class="hljs-string">'estado'</span>] == <span class="hljs-string">''</span>)]

<span class="hljs-comment"># Exibir algumas dessas localizações</span>
print(registros_sem_estado[[<span class="hljs-string">'location'</span>]])
print(<span class="hljs-string">f'Número de registros sem estado: <span class="hljs-subst">{registros_sem_estado.shape[<span class="hljs-number">0</span>]}</span>'</span>)
</div></code></pre>
<pre><code>                             location
6                       United States
14                      United States
18               Greater Philadelphia
22      Los Angeles Metropolitan Area
33                      United States
...                               ...
123784                  United States
123790                  United States
123841                  United States
123842                  United States
123845                  United States

[11597 rows x 1 columns]
Número de registros sem estado: 11597
</code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Ainda há linhas sem registos de Estadom então vou remover registros sem estado</span>
df_cleaned = df_cleaned[df_cleaned[<span class="hljs-string">'estado'</span>].notnull() &amp; (df_cleaned[<span class="hljs-string">'estado'</span>] != <span class="hljs-string">''</span>)]

<span class="hljs-comment"># Verificar o novo total de registros</span>
print(<span class="hljs-string">f'Total de registros após remoção: <span class="hljs-subst">{df_cleaned.shape[<span class="hljs-number">0</span>]}</span>'</span>)

</div></code></pre>
<pre><code>Total de registros após remoção: 107408
</code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Contar o número de vagas por estado novamente</span>
state_counts_df = df_cleaned[<span class="hljs-string">'estado'</span>].value_counts().reset_index()
state_counts_df.columns = [<span class="hljs-string">'Estado'</span>, <span class="hljs-string">'Número de Vagas'</span>]

<span class="hljs-comment"># Somar o total de vagas</span>
total_vagas = state_counts_df[<span class="hljs-string">'Número de Vagas'</span>].sum()
print(<span class="hljs-string">f'Total de Vagas após limpeza: <span class="hljs-subst">{total_vagas}</span>'</span>)

<span class="hljs-comment"># Calcular o percentual para cada estado</span>
state_counts_df[<span class="hljs-string">'Percentual'</span>] = (state_counts_df[<span class="hljs-string">'Número de Vagas'</span>] / total_vagas) * <span class="hljs-number">100</span>

<span class="hljs-comment"># Exibir a tabela atualizada</span>
print(state_counts_df)

</div></code></pre>
<pre><code>Total de Vagas após limpeza: 107408
   Estado  Número de Vagas  Percentual
0      CA            11859   11.041077
1      TX            10528    9.801877
2      NY             7367    6.858893
3      FL             5987    5.574073
4      NC             4961    4.618837
5      IL             4498    4.187770
6      PA             4057    3.777186
7      VA             3656    3.403843
8      OH             3535    3.291189
9      MA             3496    3.254879
10     GA             3458    3.219499
11     NJ             3375    3.142224
12     WA             2997    2.790295
13     MI             2735    2.546365
14     AZ             2472    2.301505
15     CO             2340    2.178609
16     MD             1983    1.846231
17     TN             1888    1.757783
18     MN             1877    1.747542
19     IN             1870    1.741025
20     MO             1861    1.732646
21     WI             1859    1.730784
22     SC             1569    1.460785
23     OR             1253    1.166580
24     CT             1178    1.096753
25     KY             1167    1.086511
26     AL              992    0.923581
27     UT              985    0.917064
28     LA              976    0.908685
29     IA              965    0.898443
30     KS              955    0.889133
31     NV              876    0.815582
32     DC              859    0.799754
33     OK              825    0.768099
34     AR              654    0.608893
35     NE              592    0.551169
36     NH              567    0.527894
37     NM              493    0.458997
38     HI              429    0.399412
39     ID              426    0.396619
40     WV              396    0.368688
41     MS              394    0.366826
42     ME              380    0.353791
43     DE              323    0.300722
44     RI              316    0.294205
45     MT              251    0.233688
46     ND              239    0.222516
47     AK              215    0.200171
48     VT              178    0.165723
49     SD              170    0.158275
50     WY              124    0.115448
51     ON                1    0.000931
52     QC                1    0.000931
</code></pre>
<pre class="hljs"><code><div>pip install plotly

</div></code></pre>
<pre><code>Defaulting to user installation because normal site-packages is not writeable
Requirement already satisfied: plotly in /Users/elisadrummond/Library/Python/3.9/lib/python/site-packages (5.24.1)
Requirement already satisfied: tenacity&gt;=6.2.0 in /Users/elisadrummond/Library/Python/3.9/lib/python/site-packages (from plotly) (9.0.0)
Requirement already satisfied: packaging in /Users/elisadrummond/Library/Python/3.9/lib/python/site-packages (from plotly) (24.1)

[1m[[0m[34;49mnotice[0m[1;39;49m][0m[39;49m A new release of pip is available: [0m[31;49m24.2[0m[39;49m -&gt; [0m[32;49m24.3.1[0m
[1m[[0m[34;49mnotice[0m[1;39;49m][0m[39;49m To update, run: [0m[32;49m/Library/Developer/CommandLineTools/usr/bin/python3 -m pip install --upgrade pip[0m
Note: you may need to restart the kernel to use updated packages.
</code></pre>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> plotly.express <span class="hljs-keyword">as</span> px

<span class="hljs-comment"># Criar o gráfico coroplético com uma paleta de cores consistente</span>
fig = px.choropleth(
    state_counts_df, 
    locations=<span class="hljs-string">'Estado'</span>,  <span class="hljs-comment"># Coluna com os estados</span>
    locationmode=<span class="hljs-string">"USA-states"</span>,  <span class="hljs-comment"># Localização para estados dos EUA</span>
    color=<span class="hljs-string">'Número de Vagas'</span>,  <span class="hljs-comment"># Preencher com base no número de vagas</span>
    hover_name=<span class="hljs-string">'Estado'</span>,  <span class="hljs-comment"># Nome do estado no hover</span>
    color_continuous_scale=px.colors.sequential.Plasma,  <span class="hljs-comment"># Paleta de cores próxima do padrão</span>
    labels={<span class="hljs-string">'Número de Vagas'</span>: <span class="hljs-string">'Número de Vagas'</span>},  <span class="hljs-comment"># Rótulos</span>
    title=<span class="hljs-string">"Distribuição de Vagas por Estado"</span>
)

<span class="hljs-comment"># Refinar o layout do mapa</span>
fig.update_geos(
    showcoastlines=<span class="hljs-literal">True</span>,
    coastlinecolor=<span class="hljs-string">"Black"</span>,
    projection_type=<span class="hljs-string">"albers usa"</span>,  <span class="hljs-comment"># Projeção apropriada para os EUA</span>
)

<span class="hljs-comment"># Refinar o layout geral</span>
fig.update_layout(
    title_font_size=<span class="hljs-number">18</span>,
    title_x=<span class="hljs-number">0.5</span>,  <span class="hljs-comment"># Centralizar o título</span>
    coloraxis_colorbar=dict(
        title=<span class="hljs-string">"Número de Vagas"</span>,
        ticks=<span class="hljs-string">"outside"</span>
    )
)

<span class="hljs-comment"># Exibir o gráfico</span>
fig.show()


</div></code></pre>
<div>                            <div id="cd85d853-0b68-430b-90f7-36e8cff77abe" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("cd85d853-0b68-430b-90f7-36e8cff77abe")) {                    Plotly.newPlot(                        "cd85d853-0b68-430b-90f7-36e8cff77abe",                        [{"coloraxis":"coloraxis","geo":"geo","hovertemplate":"\u003cb\u003e%{hovertext}\u003c\u002fb\u003e\u003cbr\u003e\u003cbr\u003eEstado=%{location}\u003cbr\u003eN\u00famero de Vagas=%{z}\u003cextra\u003e\u003c\u002fextra\u003e","hovertext":["CA","TX","NY","FL","NC","IL","PA","VA","OH","MA","GA","NJ","WA","MI","AZ","CO","MD","TN","MN","IN","MO","WI","SC","OR","CT","KY","AL","UT","LA","IA","KS","NV","DC","OK","AR","NE","NH","NM","HI","ID","WV","MS","ME","DE","RI","MT","ND","AK","VT","SD","WY","ON","QC"],"locationmode":"USA-states","locations":["CA","TX","NY","FL","NC","IL","PA","VA","OH","MA","GA","NJ","WA","MI","AZ","CO","MD","TN","MN","IN","MO","WI","SC","OR","CT","KY","AL","UT","LA","IA","KS","NV","DC","OK","AR","NE","NH","NM","HI","ID","WV","MS","ME","DE","RI","MT","ND","AK","VT","SD","WY","ON","QC"],"name":"","z":[11859,10528,7367,5987,4961,4498,4057,3656,3535,3496,3458,3375,2997,2735,2472,2340,1983,1888,1877,1870,1861,1859,1569,1253,1178,1167,992,985,976,965,955,876,859,825,654,592,567,493,429,426,396,394,380,323,316,251,239,215,178,170,124,1,1],"type":"choropleth"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"geo":{"domain":{"x":[0.0,1.0],"y":[0.0,1.0]},"center":{},"projection":{"type":"albers usa"},"showcoastlines":true,"coastlinecolor":"Black"},"coloraxis":{"colorbar":{"title":{"text":"N\u00famero de Vagas"},"ticks":"outside"},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"legend":{"tracegroupgap":0},"title":{"text":"Distribui\u00e7\u00e3o de Vagas por Estado","font":{"size":18},"x":0.5}},                        {"responsive": true}                    ).then(function(){
<p>var gd = document.getElementById('cd85d853-0b68-430b-90f7-36e8cff77abe');
var x = new MutationObserver(function (mutations, observer) {{
var display = window.getComputedStyle(gd).display;
if (!display || display === 'none') {{
console.log([gd, 'removed!']);
Plotly.purge(gd);
observer.disconnect();
}}
}});</p>
<p>// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
x.observe(notebookContainer, {childList: true});
}}</p>
<p>// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
x.observe(outputEl, {childList: true});
}}</p>
<pre><code>                    })                };                });            &lt;/script&gt;        &lt;/div&gt;
</code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># INSIGHTS:</span>
<span class="hljs-comment"># 1. Concentração de Vagas:</span>
<span class="hljs-comment"># O estado da Califórnia (CA) lidera a lista com 11.041% das vagas, totalizando 11.859 oportunidades. Isso reflete o peso econômico e o </span>
<span class="hljs-comment"># dinamismo do estado, especialmente em setores como tecnologia e entretenimento.</span>
<span class="hljs-comment"># O Texas (TX) ocupa o segundo lugar, com 10.528 vagas (9.8%), seguido por Nova York (NY), com 7.367 vagas (6.85%).</span>

<span class="hljs-comment"># 2. Regiões com Baixa Participação:</span>
<span class="hljs-comment"># Estados como Vermont (VT), Dakota do Sul (SD) e Wyoming (WY) possuem menos de 200 vagas cada, indicando menos demanda por mão de obra </span>
<span class="hljs-comment"># ou menor publicação de oportunidades no LinkedIn.</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment">########################################################################</span>
<span class="hljs-comment">############ 4 - Análise de Vagas por Nível de Experiência  ############</span>
<span class="hljs-comment">########################################################################</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># CONTEXTO:</span>
<span class="hljs-comment"># Essa análise examina a distribuição de vagas por nível de experiência, destacando as oportunidades disponíveis para diferentes </span>
<span class="hljs-comment"># perfis de candidatos.</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Contar o número de vagas por nível de experiência</span>
experience_counts_df = df_cleaned[<span class="hljs-string">'formatted_experience_level'</span>].value_counts().reset_index()
experience_counts_df.columns = [<span class="hljs-string">'Nível de Experiência'</span>, <span class="hljs-string">'Número de Vagas'</span>]

<span class="hljs-comment"># Ordenar por número de vagas</span>
experience_counts_df = experience_counts_df.sort_values(by=<span class="hljs-string">'Número de Vagas'</span>, ascending=<span class="hljs-literal">False</span>)

<span class="hljs-comment"># Exibir a tabela</span>
print(experience_counts_df)

</div></code></pre>
<pre><code>  Nível de Experiência  Número de Vagas
0     Mid-Senior level            35324
1          Entry level            33135
2     Não especificado            25284
3            Associate             8344
4             Director             3062
5           Internship             1298
6            Executive              961
</code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Criar o gráfico de barras horizontais</span>
plt.figure(figsize=(<span class="hljs-number">14</span>, <span class="hljs-number">8</span>))  <span class="hljs-comment"># Aumentando o tamanho da figura</span>
ax = sns.barplot(
    x=<span class="hljs-string">'Número de Vagas'</span>,
    y=<span class="hljs-string">'Nível de Experiência'</span>,
    data=experience_counts_df,
    errorbar=<span class="hljs-literal">None</span>,  <span class="hljs-comment"># Substituir o `ci` por `errorbar=None` para evitar o aviso de depreciação</span>
)

<span class="hljs-comment"># Aplicar um gradiente de cor usando a paleta plasma</span>
norm = mpl.colors.Normalize(vmin=<span class="hljs-number">0</span>, vmax=len(ax.patches))
cmap = plt.get_cmap(<span class="hljs-string">"plasma"</span>)

<span class="hljs-comment"># Função para arredondar as barras</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">round_bars</span><span class="hljs-params">(patch, color, rounding_size=<span class="hljs-number">10</span>)</span>:</span>
    <span class="hljs-comment"># Obter a posição da barra</span>
    x0, y0 = patch.get_xy()  <span class="hljs-comment"># Posição de origem</span>
    width, height = patch.get_width(), patch.get_height()  <span class="hljs-comment"># Largura e altura da barra</span>
    
    <span class="hljs-comment"># Definir o caminho para a barra arredondada</span>
    verts = [
        (x0 + rounding_size, y0),  <span class="hljs-comment"># Começo arredondado</span>
        (x0 + width - rounding_size, y0),
        (x0 + width, y0 + rounding_size),  <span class="hljs-comment"># Arredondamento da borda superior</span>
        (x0 + width, y0 + height - rounding_size),
        (x0 + width - rounding_size, y0 + height),
        (x0 + rounding_size, y0 + height),
        (x0, y0 + height - rounding_size),  <span class="hljs-comment"># Arredondamento da borda inferior</span>
        (x0, y0 + rounding_size)
    ]

    <span class="hljs-comment"># Fechar o caminho (voltar ao início)</span>
    verts.append(verts[<span class="hljs-number">0</span>])

    <span class="hljs-comment"># Criar o Path e o Patch</span>
    path = Path(verts, closed=<span class="hljs-literal">True</span>)
    patch.set_facecolor(color)  <span class="hljs-comment"># Aplica a cor gradiente</span>
    patch.set_edgecolor(<span class="hljs-string">"white"</span>)  <span class="hljs-comment"># Define a cor da borda como branca</span>
    patch.set_linewidth(<span class="hljs-number">2</span>)  <span class="hljs-comment"># Define a espessura da borda</span>
    
    <span class="hljs-comment"># Substituir o patch original pelo novo com bordas arredondadas</span>
    path_patch = PathPatch(path, facecolor=color, edgecolor=<span class="hljs-string">"white"</span>, lw=<span class="hljs-number">2</span>)
    ax.add_patch(path_patch)
    patch.remove()  <span class="hljs-comment"># Remove o patch original</span>

<span class="hljs-comment"># Arredondar as barras e aplicar o gradiente de cores</span>
<span class="hljs-keyword">for</span> i, patch <span class="hljs-keyword">in</span> enumerate(ax.patches):
    <span class="hljs-comment"># Calculando o valor para a cor gradiente</span>
    color = cmap(norm(i))  <span class="hljs-comment"># Aplica um gradiente na cor da barra</span>
    round_bars(patch, color)

<span class="hljs-comment"># Ajustar o visual do gráfico</span>
plt.title(<span class="hljs-string">'Distribuição de Vagas por Nível de Experiência'</span>, fontsize=<span class="hljs-number">18</span>, fontweight=<span class="hljs-string">'bold'</span>, color=<span class="hljs-string">'black'</span>, pad=<span class="hljs-number">30</span>)
plt.xlabel(<span class="hljs-string">'Número de Vagas'</span>, fontsize=<span class="hljs-number">14</span>, color=<span class="hljs-string">'darkred'</span>, labelpad=<span class="hljs-number">20</span>)  <span class="hljs-comment"># Cor personalizada e aumento do espaçamento</span>
plt.ylabel(<span class="hljs-string">'Nível de Experiência'</span>, fontsize=<span class="hljs-number">14</span>, color=<span class="hljs-string">'darkblue'</span>, labelpad=<span class="hljs-number">20</span>)  <span class="hljs-comment"># Cor personalizada e aumento do espaçamento</span>

<span class="hljs-comment"># Remover as linhas do fundo (grid e bordas)</span>
ax.grid(<span class="hljs-literal">False</span>)  <span class="hljs-comment"># Remove o grid do gráfico</span>
<span class="hljs-keyword">for</span> spine <span class="hljs-keyword">in</span> ax.spines.values():
    spine.set_visible(<span class="hljs-literal">False</span>)  <span class="hljs-comment"># Remove as bordas (spines) do gráfico</span>

<span class="hljs-comment"># Remover a legenda desnecessária</span>
plt.legend([], [], frameon=<span class="hljs-literal">False</span>)

<span class="hljs-comment"># Melhorar o layout para evitar cortes</span>
plt.tight_layout()

<span class="hljs-comment"># Gravar gráfico em png na pasta do website</span>
output_dir = <span class="hljs-string">'/Users/elisadrummond/projeto-tendencias-empregos/static/graphs'</span>
<span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(output_dir):
    os.makedirs(output_dir)

<span class="hljs-comment"># Salvar o gráfico</span>
graph_path = os.path.join(output_dir, <span class="hljs-string">'grafico3_nivel_experiencia.png'</span>)
plt.savefig(graph_path, dpi=<span class="hljs-number">300</span>, bbox_inches=<span class="hljs-string">'tight'</span>)  <span class="hljs-comment"># Aumentar a resolução para maior qualidade</span>

<span class="hljs-comment"># Exibir o gráfico</span>
plt.show()

<span class="hljs-comment"># Fechar a figura após salvar</span>
plt.close()

<span class="hljs-comment"># Mensagem de confirmação</span>
print(<span class="hljs-string">f"Gráfico salvo em: <span class="hljs-subst">{graph_path}</span>"</span>)


</div></code></pre>
<p><img src="output_63_0.png" alt="png"></p>
<pre><code>Gráfico salvo em: /Users/elisadrummond/projeto-tendencias-empregos/static/graphs/grafico3_nivel_experiencia.png
</code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># INSIGHTS:</span>
<span class="hljs-comment"># O nível predominante nas vagas de emprego é o Mid-Senior Level, com 35.324 vagas (32,9%), evidenciando uma forte demanda por </span>
<span class="hljs-comment"># profissionais com experiência intermediária a avançada. Em seguida, o Entry Level ocupa a segunda posição com 33.135 vagas (30,8%), </span>
<span class="hljs-comment"># oferecendo boas oportunidades para recém-formados e profissionais iniciando suas carreiras. No entanto, há uma lacuna significativa, </span>
<span class="hljs-comment"># pois 25.284 vagas (23,5%) não especificam o nível de experiência, o que pode dificultar a segmentação precisa de candidatos.</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment">########################################################################</span>
<span class="hljs-comment">############ 4 - Correlaçao entre visualização e aplicação #############</span>
<span class="hljs-comment">########################################################################</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># CONTEXTO:</span>
<span class="hljs-comment"># A correlação entre visualizações de vagas e candidaturas foi analisada, separando vagas que permitem trabalho remoto e aquelas que </span>
<span class="hljs-comment"># não permitem. O coeficiente de correlação de Pearson foi calculado para entender a relação linear entre essas variáveis para cada grupo.</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Calcula o coeficiente de correlação de Pearson entre as colunas 'views' e 'applies'</span>
<span class="hljs-comment"># A correlação de Pearson mede a força e a direção da relação linear entre as duas variáveis.</span>
correlacao = df[<span class="hljs-string">'views'</span>].corr(df[<span class="hljs-string">'applies'</span>])

<span class="hljs-comment"># Exibe o coeficiente de correlação no console.</span>
<span class="hljs-comment"># O coeficiente de correlação pode variar de -1 (correlação negativa perfeita) a 1 (correlação positiva perfeita).</span>
<span class="hljs-comment"># Se o valor estiver perto de 0, significa que não há uma relação linear forte entre as variáveis.</span>
print(<span class="hljs-string">f'Coeficiente de correlação de Pearson: <span class="hljs-subst">{correlacao}</span>'</span>)
</div></code></pre>
<pre><code>Coeficiente de correlação de Pearson: 0.49430495349631376
</code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Agora, podemos calcular as correlações para cada categoria:</span>
df_remoto = df_cleaned[df_cleaned[<span class="hljs-string">'remote_allowed'</span>] == <span class="hljs-string">'Permitido'</span>]
df_nao_remoto = df_cleaned[df_cleaned[<span class="hljs-string">'remote_allowed'</span>] == <span class="hljs-string">'Não Permitido'</span>]

<span class="hljs-comment"># Correlação para vagas remotas</span>
correlacao_remoto = df_remoto[<span class="hljs-string">'views'</span>].corr(df_remoto[<span class="hljs-string">'applies'</span>])
print(<span class="hljs-string">f"Correlação (remoto permitido): <span class="hljs-subst">{correlacao_remoto}</span>"</span>)

<span class="hljs-comment"># Correlação para vagas não remotas</span>
correlacao_nao_remoto = df_nao_remoto[<span class="hljs-string">'views'</span>].corr(df_nao_remoto[<span class="hljs-string">'applies'</span>])
print(<span class="hljs-string">f"Correlação (remoto não permitido): <span class="hljs-subst">{correlacao_nao_remoto}</span>"</span>)

</div></code></pre>
<pre><code>Correlação (remoto permitido): 0.7728109439719456
Correlação (remoto não permitido): 0.38354013638845524
</code></pre>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> seaborn <span class="hljs-keyword">as</span> sns
<span class="hljs-keyword">import</span> os

<span class="hljs-comment"># Definindo o tamanho do gráfico (largura, altura)</span>
plt.figure(figsize=(<span class="hljs-number">20</span>, <span class="hljs-number">10</span>))  <span class="hljs-comment"># Aumentando o tamanho do gráfico</span>

<span class="hljs-comment"># Gráfico de dispersão com linha de tendência utilizando a paleta 'plasma'</span>
sns.regplot(x=<span class="hljs-string">'views'</span>, y=<span class="hljs-string">'applies'</span>, data=df_cleaned[df_cleaned[<span class="hljs-string">'remote_allowed'</span>] == <span class="hljs-string">'Permitido'</span>], 
            scatter_kws={<span class="hljs-string">'color'</span>: sns.color_palette(<span class="hljs-string">"plasma"</span>, <span class="hljs-number">2</span>)[<span class="hljs-number">0</span>], <span class="hljs-string">'s'</span>: <span class="hljs-number">100</span>},  <span class="hljs-comment"># Cor para 'Remoto Permitido' e tamanho dos pontos</span>
            line_kws={<span class="hljs-string">'color'</span>: sns.color_palette(<span class="hljs-string">"plasma"</span>, <span class="hljs-number">2</span>)[<span class="hljs-number">0</span>], <span class="hljs-string">'lw'</span>: <span class="hljs-number">2</span>}, label=<span class="hljs-string">'Remoto Permitido'</span>, ci=<span class="hljs-literal">None</span>)

sns.regplot(x=<span class="hljs-string">'views'</span>, y=<span class="hljs-string">'applies'</span>, data=df_cleaned[df_cleaned[<span class="hljs-string">'remote_allowed'</span>] == <span class="hljs-string">'Não Permitido'</span>], 
            scatter_kws={<span class="hljs-string">'color'</span>: sns.color_palette(<span class="hljs-string">"plasma"</span>, <span class="hljs-number">2</span>)[<span class="hljs-number">1</span>], <span class="hljs-string">'s'</span>: <span class="hljs-number">100</span>},  <span class="hljs-comment"># Cor para 'Remoto Não Permitido' e tamanho dos pontos</span>
            line_kws={<span class="hljs-string">'color'</span>: sns.color_palette(<span class="hljs-string">"plasma"</span>, <span class="hljs-number">2</span>)[<span class="hljs-number">1</span>], <span class="hljs-string">'lw'</span>: <span class="hljs-number">2</span>}, label=<span class="hljs-string">'Remoto Não Permitido'</span>, ci=<span class="hljs-literal">None</span>)

<span class="hljs-comment"># Adicionar título e rótulos</span>
plt.title(<span class="hljs-string">'Relação entre Views e Applies por Tipo de Trabalho'</span>, fontsize=<span class="hljs-number">22</span>, fontweight=<span class="hljs-string">'bold'</span>, color=<span class="hljs-string">'black'</span>, pad=<span class="hljs-number">30</span>)
plt.xlabel(<span class="hljs-string">'Views'</span>, fontsize=<span class="hljs-number">18</span>, color=<span class="hljs-string">'darkred'</span>, labelpad=<span class="hljs-number">20</span>)
plt.ylabel(<span class="hljs-string">'Applies'</span>, fontsize=<span class="hljs-number">18</span>, color=<span class="hljs-string">'darkblue'</span>, labelpad=<span class="hljs-number">20</span>)

<span class="hljs-comment"># Adicionar legenda</span>
plt.legend(fontsize=<span class="hljs-number">16</span>)

<span class="hljs-comment"># Remover grid e bordas</span>
plt.grid(<span class="hljs-literal">False</span>)

<span class="hljs-comment"># Gravar gráfico em png na pasta do website</span>
output_dir = <span class="hljs-string">'/Users/elisadrummond/projeto-tendencias-empregos/static/graphs'</span>
<span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(output_dir):
    os.makedirs(output_dir)

<span class="hljs-comment"># Salvar o gráfico</span>
graph_path = os.path.join(output_dir, <span class="hljs-string">'grafico4_correlacao_views_applies.png'</span>)
plt.savefig(graph_path, dpi=<span class="hljs-number">300</span>, bbox_inches=<span class="hljs-string">'tight'</span>)

<span class="hljs-comment"># Exibir o gráfico</span>
plt.tight_layout()
plt.show()

<span class="hljs-comment"># Fechar a figura após salvar</span>
plt.close()

<span class="hljs-comment"># Mensagem de confirmação</span>
print(<span class="hljs-string">f"Gráfico salvo em: <span class="hljs-subst">{graph_path}</span>"</span>)


</div></code></pre>
<p><img src="output_69_0.png" alt="png"></p>
<pre><code>Gráfico salvo em: /Users/elisadrummond/projeto-tendencias-empregos/static/graphs/grafico4_correlacao_views_applies.png
</code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># INSIGHTS:</span>
<span class="hljs-comment"># A correlação mais forte para vagas com trabalho remoto permitido (0.77) indica que, quanto mais visualizações essas vagas recebem, </span>
<span class="hljs-comment"># mais candidaturas são geradas, refletindo uma preferência dos candidatos por oportunidades remotas. Por outro lado, as vagas sem </span>
<span class="hljs-comment"># trabalho remoto mostram uma correlação mais baixa (0.38), sugerindo que, embora também haja interesse, outros fatores podem influenciar </span>
<span class="hljs-comment"># mais as candidaturas.</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment">########################################################################</span>
<span class="hljs-comment">############### 5 - TOP 10 Títulos mais ofertados ################</span>
<span class="hljs-comment">########################################################################</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># CONTEXTO:</span>
<span class="hljs-comment"># A análise compara os 10 títulos de vagas de emprego mais ofertadas com o número de aplicações para cada cargo.</span>
<span class="hljs-comment"># O objetivo é entender a relação entre a quantidade devagas abertas e o interesse dos candidatos, além de explorar a correlação entre </span>
<span class="hljs-comment"># essas variáveis.</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># 1. Contagem dos Títulos mais Ofertados</span>
contagem_ofertas = df_cleaned[<span class="hljs-string">'title'</span>].value_counts().head(<span class="hljs-number">10</span>)

<span class="hljs-comment"># 2. Calcular o número de aplicações por título de vaga</span>
aplicacoes_por_titulo = df_cleaned.groupby(<span class="hljs-string">'title'</span>)[<span class="hljs-string">'applies'</span>].sum()

<span class="hljs-comment"># 3. Combinar as duas informações (ofertas e aplicações) para comparação</span>
vaga_aplicacao_comparacao = pd.DataFrame({
    <span class="hljs-string">'Número de Ofertas'</span>: contagem_ofertas,
    <span class="hljs-string">'Número de Aplicações'</span>: aplicacoes_por_titulo[contagem_ofertas.index]
})

</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> os

<span class="hljs-comment"># Criar gráfico de barras agrupadas com gradiente e maior tamanho</span>
fig, ax = plt.subplots(figsize=(<span class="hljs-number">20</span>, <span class="hljs-number">10</span>))  <span class="hljs-comment"># Gráfico maior</span>

<span class="hljs-comment"># Índice para as barras</span>
index = np.arange(len(vaga_aplicacao_comparacao))

<span class="hljs-comment"># Largura das barras</span>
bar_width = <span class="hljs-number">0.4</span>

<span class="hljs-comment"># Gradiente para as barras</span>
cmap = plt.cm.plasma
colors1 = cmap(np.linspace(<span class="hljs-number">0.2</span>, <span class="hljs-number">0.5</span>, len(vaga_aplicacao_comparacao)))
colors2 = cmap(np.linspace(<span class="hljs-number">0.7</span>, <span class="hljs-number">1.0</span>, len(vaga_aplicacao_comparacao)))

<span class="hljs-comment"># Definir as barras para o número de ofertas com gradiente</span>
bars1 = ax.bar(
    index, 
    vaga_aplicacao_comparacao[<span class="hljs-string">'Número de Ofertas'</span>], 
    bar_width, 
    color=colors1,
    label=<span class="hljs-string">'Número de Ofertas'</span>  <span class="hljs-comment"># Adicionando label para a legenda</span>
)

<span class="hljs-comment"># Definir as barras para o número de aplicações com gradiente</span>
bars2 = ax.bar(
    index + bar_width, 
    vaga_aplicacao_comparacao[<span class="hljs-string">'Número de Aplicações'</span>], 
    bar_width, 
    color=colors2,
    label=<span class="hljs-string">'Número de Aplicações'</span>  <span class="hljs-comment"># Adicionando label para a legenda</span>
)

<span class="hljs-comment"># Ajustar o título e rótulos</span>
ax.set_title(
    <span class="hljs-string">'Top 10 Vagas mais Ofertadas vs. Número de Aplicações'</span>, 
    fontsize=<span class="hljs-number">22</span>, 
    fontweight=<span class="hljs-string">'bold'</span>, 
    color=<span class="hljs-string">'black'</span>, 
    pad=<span class="hljs-number">30</span>
)
ax.set_xlabel(
    <span class="hljs-string">'Título da Vaga'</span>, 
    fontsize=<span class="hljs-number">18</span>, 
    color=<span class="hljs-string">'darkred'</span>, 
    labelpad=<span class="hljs-number">20</span>
)
ax.set_ylabel(
    <span class="hljs-string">'Número de Ofertas e Aplicações'</span>, 
    fontsize=<span class="hljs-number">18</span>, 
    color=<span class="hljs-string">'darkblue'</span>, 
    labelpad=<span class="hljs-number">20</span>
)

<span class="hljs-comment"># Ajustar rótulos do eixo X</span>
ax.set_xticks(index + bar_width / <span class="hljs-number">2</span>)
ax.set_xticklabels(vaga_aplicacao_comparacao.index, rotation=<span class="hljs-number">45</span>, ha=<span class="hljs-string">'right'</span>, fontsize=<span class="hljs-number">16</span>)

<span class="hljs-comment"># Adicionar a legenda</span>
ax.legend(fontsize=<span class="hljs-number">16</span>, loc=<span class="hljs-string">'upper left'</span>)

<span class="hljs-comment"># Remover grid e bordas</span>
ax.grid(<span class="hljs-literal">False</span>)
<span class="hljs-keyword">for</span> spine <span class="hljs-keyword">in</span> ax.spines.values():
    spine.set_visible(<span class="hljs-literal">False</span>)

<span class="hljs-comment"># Melhorar layout</span>
plt.tight_layout()

<span class="hljs-comment"># Salvar o gráfico</span>
output_dir = <span class="hljs-string">'/Users/elisadrummond/projeto-tendencias-empregos/static/graphs'</span>
<span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(output_dir):
    os.makedirs(output_dir)

graph_path = os.path.join(output_dir, <span class="hljs-string">'grafico5_top10_titulos_ofertados.png'</span>)
plt.savefig(graph_path, dpi=<span class="hljs-number">300</span>, bbox_inches=<span class="hljs-string">'tight'</span>)

<span class="hljs-comment"># Exibir gráfico</span>
plt.show()

<span class="hljs-comment"># Fechar a figura</span>
plt.close(fig)

<span class="hljs-comment"># Mensagem de confirmação</span>
print(<span class="hljs-string">f"Gráfico salvo em: <span class="hljs-subst">{graph_path}</span>"</span>)



</div></code></pre>
<p><img src="output_74_0.png" alt="png"></p>
<pre><code>Gráfico salvo em: /Users/elisadrummond/projeto-tendencias-empregos/static/graphs/grafico5_top10_titulos_ofertados.png
</code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># INSIGHTS:</span>
<span class="hljs-comment"># As vagas mais ofertadas incluem cargos como Sales Manager, Customer Service Representative e Project Manager, mas a quantidade de </span>
<span class="hljs-comment"># aplicações varia significativamente entre elas. Enquanto algumas vagas com muitos anúncios, como Sales Manager, têm poucas candidaturas, </span>
<span class="hljs-comment"># outras, como Project Manager, geram uma grande quantidade de aplicações, o que indica uma demanda maior para essas posições.</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment">########################################################################</span>
<span class="hljs-comment">############### 5 - TOP 10 Títulos mais aplicados ################</span>
<span class="hljs-comment">########################################################################</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># CONTEXTO:</span>
<span class="hljs-comment"># A análise comparou as 10 vagas mais aplicadas com a quantidade de ofertas disponíveis para cada cargo. A correlação entre as duas </span>
<span class="hljs-comment"># variáveis foi calculada, e o gráfico gerado mostra, para cada vaga, a comparação entre o número de aplicações e de ofertas.</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># 1. Contar as vagas com mais aplicações</span>
top_10_aplicacoes = df_cleaned.groupby(<span class="hljs-string">'title'</span>)[<span class="hljs-string">'applies'</span>].sum().sort_values(ascending=<span class="hljs-literal">False</span>).head(<span class="hljs-number">10</span>)

<span class="hljs-comment"># Exibir as 10 vagas com mais aplicações</span>
print(<span class="hljs-string">"Top 10 Vagas com Mais Aplicações:"</span>)
print(top_10_aplicacoes)

<span class="hljs-comment"># 2. Calcular o número de ofertas por título de vaga</span>
ofertas_por_titulo = df_cleaned.groupby(<span class="hljs-string">'title'</span>)[<span class="hljs-string">'title'</span>].count()

<span class="hljs-comment"># 3. Combinar as duas informações (aplicações e ofertas) para comparação</span>
aplicacao_oferta_comparacao = pd.DataFrame({
    <span class="hljs-string">'Número de Aplicações'</span>: top_10_aplicacoes,
    <span class="hljs-string">'Número de Ofertas'</span>: ofertas_por_titulo[top_10_aplicacoes.index]
})

<span class="hljs-comment"># Exibir a comparação</span>
print(<span class="hljs-string">"\nComparação entre o número de aplicações e o número de ofertas:"</span>)
print(aplicacao_oferta_comparacao)

<span class="hljs-comment"># Calcular os percentuais</span>
aplicacao_oferta_comparacao[<span class="hljs-string">'Percentual de Aplicações (%)'</span>] = (aplicacao_oferta_comparacao[<span class="hljs-string">'Número de Aplicações'</span>] / aplicacao_oferta_comparacao[<span class="hljs-string">'Número de Ofertas'</span>]) * <span class="hljs-number">100</span>

<span class="hljs-comment"># Exibir os percentuais</span>
print(<span class="hljs-string">"\nPercentual de Aplicações em relação às Ofertas:"</span>)
print(aplicacao_oferta_comparacao[[<span class="hljs-string">'Percentual de Aplicações (%)'</span>]])

<span class="hljs-comment"># Exibindo os resultados</span>
print(<span class="hljs-string">"\nResumo:"</span>)
print(<span class="hljs-string">f"Total de vagas analisadas: <span class="hljs-subst">{len(aplicacao_oferta_comparacao)}</span>"</span>)

</div></code></pre>
<pre><code>Top 10 Vagas com Mais Aplicações:
title
Data Analyst                3682.0
Data Engineer               2897.0
Business Analyst            2122.0
Software Engineer           2072.0
Project Manager             1086.0
Cloud Engineer               890.0
DevOps Engineer              791.0
Senior Data Engineer         747.0
Senior Software Engineer     735.0
Data Scientist               676.0
Name: applies, dtype: float64

Comparação entre o número de aplicações e o número de ofertas:
                          Número de Aplicações  Número de Ofertas
title                                                            
Data Analyst                            3682.0                 96
Data Engineer                           2897.0                 75
Business Analyst                        2122.0                121
Software Engineer                       2072.0                122
Project Manager                         1086.0                309
Cloud Engineer                           890.0                 26
DevOps Engineer                          791.0                 41
Senior Data Engineer                     747.0                 27
Senior Software Engineer                 735.0                101
Data Scientist                           676.0                 45

Percentual de Aplicações em relação às Ofertas:
                          Percentual de Aplicações (%)
title                                                 
Data Analyst                               3835.416667
Data Engineer                              3862.666667
Business Analyst                           1753.719008
Software Engineer                          1698.360656
Project Manager                             351.456311
Cloud Engineer                             3423.076923
DevOps Engineer                            1929.268293
Senior Data Engineer                       2766.666667
Senior Software Engineer                    727.722772
Data Scientist                             1502.222222

Resumo:
Total de vagas analisadas: 10
</code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Definindo o tamanho do gráfico</span>
fig, ax = plt.subplots(figsize=(<span class="hljs-number">20</span>, <span class="hljs-number">10</span>))  <span class="hljs-comment"># Aumentando o tamanho do gráfico</span>

<span class="hljs-comment"># Número de barras</span>
n = len(aplicacao_oferta_comparacao)

<span class="hljs-comment"># Criando um índice para as barras</span>
index = np.arange(n)

<span class="hljs-comment"># Largura das barras</span>
bar_width = <span class="hljs-number">0.35</span>

<span class="hljs-comment"># Gradiente para as barras</span>
cmap = plt.cm.plasma
colors1 = cmap(np.linspace(<span class="hljs-number">0.2</span>, <span class="hljs-number">0.5</span>, n))  <span class="hljs-comment"># Gradiente para o número de aplicações</span>
colors2 = cmap(np.linspace(<span class="hljs-number">0.7</span>, <span class="hljs-number">1.0</span>, n))  <span class="hljs-comment"># Gradiente para o número de ofertas</span>

<span class="hljs-comment"># Plotando as barras para o número de aplicações</span>
bars1 = ax.bar(index, aplicacao_oferta_comparacao[<span class="hljs-string">'Número de Aplicações'</span>], bar_width, color=colors1, label=<span class="hljs-string">'Número de Aplicações'</span>)

<span class="hljs-comment"># Plotando as barras para o número de ofertas, deslocadas para o lado direito</span>
bars2 = ax.bar(index + bar_width, aplicacao_oferta_comparacao[<span class="hljs-string">'Número de Ofertas'</span>], bar_width, color=colors2, label=<span class="hljs-string">'Número de Ofertas'</span>)

<span class="hljs-comment"># Adicionando título e rótulos</span>
ax.set_title(<span class="hljs-string">'Top 10 Vagas Aplicadas: Comparação entre Aplicações e Ofertas'</span>, fontsize=<span class="hljs-number">22</span>, fontweight=<span class="hljs-string">'bold'</span>, color=<span class="hljs-string">'black'</span>, pad=<span class="hljs-number">30</span>)
ax.set_xlabel(<span class="hljs-string">'Título da Vaga'</span>, fontsize=<span class="hljs-number">18</span>, color=<span class="hljs-string">'darkred'</span>, labelpad=<span class="hljs-number">20</span>)
ax.set_ylabel(<span class="hljs-string">'Número de Ofertas e Aplicações'</span>, fontsize=<span class="hljs-number">18</span>, color=<span class="hljs-string">'darkblue'</span>, labelpad=<span class="hljs-number">20</span>)

<span class="hljs-comment"># Ajustando o eixo X para as vagas</span>
ax.set_xticks(index + bar_width / <span class="hljs-number">2</span>)
ax.set_xticklabels(aplicacao_oferta_comparacao.index, rotation=<span class="hljs-number">45</span>, ha=<span class="hljs-string">'right'</span>, fontsize=<span class="hljs-number">16</span>)

<span class="hljs-comment"># Adicionar a legenda</span>
ax.legend(fontsize=<span class="hljs-number">16</span>, loc=<span class="hljs-string">'upper right'</span>)

<span class="hljs-comment"># Remover grid e bordas</span>
ax.grid(<span class="hljs-literal">False</span>)
<span class="hljs-keyword">for</span> spine <span class="hljs-keyword">in</span> ax.spines.values():
    spine.set_visible(<span class="hljs-literal">False</span>)

<span class="hljs-comment"># Melhorar layout</span>
plt.tight_layout()

<span class="hljs-comment"># Gravar gráfico em png na pasta do website</span>
output_dir = <span class="hljs-string">'/Users/elisadrummond/projeto-tendencias-empregos/static/graphs'</span>
<span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(output_dir):
    os.makedirs(output_dir)

<span class="hljs-comment"># Salvar o gráfico</span>
graph_path = os.path.join(output_dir, <span class="hljs-string">'grafico6_top10_vagas_procuradas_candidatos.png'</span>)
plt.savefig(graph_path, dpi=<span class="hljs-number">300</span>, bbox_inches=<span class="hljs-string">'tight'</span>)

<span class="hljs-comment"># Exibir gráfico</span>
plt.show()

<span class="hljs-comment"># Fechar a figura após exibição</span>
plt.close(fig)

<span class="hljs-comment"># Mensagem de confirmação</span>
print(<span class="hljs-string">f"Gráfico salvo em: <span class="hljs-subst">{graph_path}</span>"</span>)

</div></code></pre>
<p><img src="output_79_0.png" alt="png"></p>
<pre><code>Gráfico salvo em: /Users/elisadrummond/projeto-tendencias-empregos/static/graphs/grafico6_top10_vagas_procuradas_candidatos.png
</code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># INSIGHTS:</span>
<span class="hljs-comment"># Os dados revelam que funções como Data Analyst e Data Engineer têm alta competição, com muitas aplicações para poucas ofertas, </span>
<span class="hljs-comment"># indicando uma alta demanda e limitada oferta. Vagas como Business Analyst, Software Engineer e Project Manager mostram um equilíbrio </span>
<span class="hljs-comment"># maior entre ofertas e aplicações, enquanto funções como Cloud Engineer e DevOps Engineer têm mais ofertas do que aplicações, </span>
<span class="hljs-comment"># sugerindo menor concorrência. A vaga de Data Scientist tem poucas aplicações, apesar de ter algumas ofertas, indicando uma demanda mais </span>
<span class="hljs-comment"># controlada, possivelmente devido à especialização exigida.</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment">########################################################################</span>
<span class="hljs-comment">############### 5 - SKILLS ################</span>
<span class="hljs-comment">########################################################################</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># CONTEXTO:</span>
<span class="hljs-comment"># Esta análise visa entender as habilidades mais demandadas nas vagas de emprego e identificar as competências mais valorizadas pelas </span>
<span class="hljs-comment"># empresas, e o que isso pode revelar sobre as tendências do mercado de trabalho atual.</span>
</div></code></pre>
<pre class="hljs"><code><div>!pip install wordcloud

</div></code></pre>
<pre><code>Defaulting to user installation because normal site-packages is not writeable
Requirement already satisfied: wordcloud in /Users/elisadrummond/Library/Python/3.9/lib/python/site-packages (1.9.4)
Requirement already satisfied: numpy&gt;=1.6.1 in /Users/elisadrummond/Library/Python/3.9/lib/python/site-packages (from wordcloud) (2.0.2)
Requirement already satisfied: pillow in /Users/elisadrummond/Library/Python/3.9/lib/python/site-packages (from wordcloud) (10.4.0)
Requirement already satisfied: matplotlib in /Users/elisadrummond/Library/Python/3.9/lib/python/site-packages (from wordcloud) (3.9.2)
Requirement already satisfied: contourpy&gt;=1.0.1 in /Users/elisadrummond/Library/Python/3.9/lib/python/site-packages (from matplotlib-&gt;wordcloud) (1.3.0)
Requirement already satisfied: cycler&gt;=0.10 in /Users/elisadrummond/Library/Python/3.9/lib/python/site-packages (from matplotlib-&gt;wordcloud) (0.12.1)
Requirement already satisfied: fonttools&gt;=4.22.0 in /Users/elisadrummond/Library/Python/3.9/lib/python/site-packages (from matplotlib-&gt;wordcloud) (4.54.1)
Requirement already satisfied: kiwisolver&gt;=1.3.1 in /Users/elisadrummond/Library/Python/3.9/lib/python/site-packages (from matplotlib-&gt;wordcloud) (1.4.7)
Requirement already satisfied: packaging&gt;=20.0 in /Users/elisadrummond/Library/Python/3.9/lib/python/site-packages (from matplotlib-&gt;wordcloud) (24.1)
Requirement already satisfied: pyparsing&gt;=2.3.1 in /Users/elisadrummond/Library/Python/3.9/lib/python/site-packages (from matplotlib-&gt;wordcloud) (3.1.4)
Requirement already satisfied: python-dateutil&gt;=2.7 in /Users/elisadrummond/Library/Python/3.9/lib/python/site-packages (from matplotlib-&gt;wordcloud) (2.9.0.post0)
Requirement already satisfied: importlib-resources&gt;=3.2.0 in /Users/elisadrummond/Library/Python/3.9/lib/python/site-packages (from matplotlib-&gt;wordcloud) (6.4.5)
Requirement already satisfied: zipp&gt;=3.1.0 in /Users/elisadrummond/Library/Python/3.9/lib/python/site-packages (from importlib-resources&gt;=3.2.0-&gt;matplotlib-&gt;wordcloud) (3.20.2)
Requirement already satisfied: six&gt;=1.5 in /Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/site-packages (from python-dateutil&gt;=2.7-&gt;matplotlib-&gt;wordcloud) (1.15.0)

[1m[[0m[34;49mnotice[0m[1;39;49m][0m[39;49m A new release of pip is available: [0m[31;49m24.2[0m[39;49m -&gt; [0m[32;49m24.3.1[0m
[1m[[0m[34;49mnotice[0m[1;39;49m][0m[39;49m To update, run: [0m[32;49m/Library/Developer/CommandLineTools/usr/bin/python3 -m pip install --upgrade pip[0m
</code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Limpar as habilidades e separar em listas</span>
df_cleaned[<span class="hljs-string">'skills_desc'</span>] = df_cleaned[<span class="hljs-string">'skills_desc'</span>].str.replace(<span class="hljs-string">r'This position requires the following skills: '</span>, <span class="hljs-string">''</span>, regex=<span class="hljs-literal">True</span>)

<span class="hljs-comment"># Dividir as habilidades em listas separadas</span>
df_cleaned[<span class="hljs-string">'skills_list'</span>] = df_cleaned[<span class="hljs-string">'skills_desc'</span>].str.split(<span class="hljs-string">','</span>)

<span class="hljs-comment"># Explodir as listas para que cada habilidade fique em uma linha separada</span>
habilidades_expandidas = df_cleaned.explode(<span class="hljs-string">'skills_list'</span>)

<span class="hljs-comment"># Limpar espaços extras e normalizar as habilidades</span>
habilidades_expandidas[<span class="hljs-string">'skills_list'</span>] = habilidades_expandidas[<span class="hljs-string">'skills_list'</span>].str.strip()

<span class="hljs-comment"># Remover 'Habilidades não especificadas' da lista</span>
habilidades_expandidas = habilidades_expandidas[habilidades_expandidas[<span class="hljs-string">'skills_list'</span>] != <span class="hljs-string">'Habilidades não especificadas'</span>]

<span class="hljs-comment"># Recontar as habilidades</span>
habilidades_frequentes = habilidades_expandidas[<span class="hljs-string">'skills_list'</span>].value_counts()

<span class="hljs-comment"># Selecionar as 15 habilidades mais frequentes</span>
top_15_habilidades = habilidades_frequentes.head(<span class="hljs-number">15</span>)

<span class="hljs-comment"># Ajustes de fonte e tamanho conforme definido</span>
font_properties = {
    <span class="hljs-string">'family'</span>: <span class="hljs-string">'Arial'</span>,  <span class="hljs-comment"># Definindo a fonte</span>
    <span class="hljs-string">'weight'</span>: <span class="hljs-string">'normal'</span>,
    <span class="hljs-string">'size'</span>: <span class="hljs-number">14</span>  <span class="hljs-comment"># Tamanho de texto padrão</span>
}

<span class="hljs-comment"># Gerar a nuvem de palavras com ajustes</span>
wordcloud = WordCloud(
    width=<span class="hljs-number">800</span>, 
    height=<span class="hljs-number">400</span>, 
    background_color=<span class="hljs-string">'white'</span>, 
    colormap=<span class="hljs-string">'plasma'</span>,
    font_path=<span class="hljs-literal">None</span>,  <span class="hljs-comment"># Caso queira usar uma fonte específica, adicione o caminho para o arquivo</span>
    stopwords=<span class="hljs-literal">None</span>,  <span class="hljs-comment"># Define que as palavras mais comuns não sejam ignoradas</span>
    max_words=<span class="hljs-number">150</span>
).generate_from_frequencies(top_15_habilidades)

<span class="hljs-comment"># Exibindo a nuvem de palavras</span>
plt.figure(figsize=(<span class="hljs-number">10</span>, <span class="hljs-number">6</span>))
plt.imshow(wordcloud, interpolation=<span class="hljs-string">'bilinear'</span>)
plt.axis(<span class="hljs-string">'off'</span>)  <span class="hljs-comment"># Remove os eixos para uma melhor visualização</span>

<span class="hljs-comment"># Ajustar o título com mais espaço entre a nuvem de palavras</span>
plt.title(<span class="hljs-string">'As 15 Habilidades mais requisitadas'</span>, fontsize=<span class="hljs-number">16</span>, fontdict=font_properties, pad=<span class="hljs-number">20</span>)

<span class="hljs-comment"># Gravar a imagem em PNG na pasta do website</span>
output_dir = <span class="hljs-string">'/Users/elisadrummond/projeto-tendencias-empregos/static/graphs'</span>
<span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(output_dir):
    os.makedirs(output_dir)

<span class="hljs-comment"># Salvar o gráfico</span>
graph_path = os.path.join(output_dir, <span class="hljs-string">'nuvem_palavras_habilidades.png'</span>)
plt.savefig(graph_path)

<span class="hljs-comment"># Fechar a figura após salvar</span>
plt.close()

<span class="hljs-comment"># Mensagem de confirmação</span>
print(<span class="hljs-string">f"Nuvem de palavras salva em: <span class="hljs-subst">{graph_path}</span>"</span>)

<span class="hljs-comment"># Exibir o gráfico</span>
plt.show()
</div></code></pre>
<pre><code>---------------------------------------------------------------------------

NameError                                 Traceback (most recent call last)

Cell In[266], line 30
     23 font_properties = {
     24     'family': 'Arial',  # Definindo a fonte
     25     'weight': 'normal',
     26     'size': 14  # Tamanho de texto padrão
     27 }
     29 # Gerar a nuvem de palavras com ajustes
---&gt; 30 wordcloud = WordCloud(
     31     width=800, 
     32     height=400, 
     33     background_color='white', 
     34     colormap='plasma',
     35     font_path=None,  # Caso queira usar uma fonte específica, adicione o caminho para o arquivo
     36     stopwords=None,  # Define que as palavras mais comuns não sejam ignoradas
     37     max_words=150
     38 ).generate_from_frequencies(top_15_habilidades)
     40 # Exibindo a nuvem de palavras
     41 plt.figure(figsize=(10, 6))


NameError: name 'WordCloud' is not defined
</code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># INSIGHTS: </span>
<span class="hljs-comment"># As habilidades mais frequentes indicam que empresas valorizam tanto habilidades técnicas quanto comportamentais, como comunicação eficaz </span>
<span class="hljs-comment"># e empatia. O aumento da ênfase em habilidades sociais, como "Networking" e "Community Outreach", reflete a crescente importância da </span>
<span class="hljs-comment"># construção de relações e da responsabilidade social nas organizações. </span>
</div></code></pre>
<pre class="hljs"><code><div>!pip freeze &gt; requirements.txt
</div></code></pre>
<pre class="hljs"><code><div>
</div></code></pre>
<pre class="hljs"><code><div>
</div></code></pre>
<pre class="hljs"><code><div>
</div></code></pre>

</body>
</html>
